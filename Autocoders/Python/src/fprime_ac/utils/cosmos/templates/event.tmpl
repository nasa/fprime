# Created on ${date}
# Author: ${user}
#echo '#\n'
# THIS FILE IS AUTOMATICALLY GENERATED - DO NOT EDIT!!!
#echo '#\n'
# Component Source: ${source}

# COMPONENT: "${component_string}"
TELEMETRY ${target_caps} ${evr_name} ${endianness} "${evr_desc}"
    #raw<%=#end raw render "_${target_lower}_tlm_evr_hdr.txt", locals: {id: ${id}} %>

    #for $name, $desc, $template_string, $types, $bit_offset, $bits, $type in $evr_items
    #if $type == 'BLOCK'
    APPEND_ITEM EVR_ITEMS 0 BLOCK "Contains all other items"
    #else if not $template_string == ''
      ITEM $name 0 0 DERIVED "$desc"
        READ_CONVERSION multi_string_tlm_item_conversion.rb "$template_string"
        #for $type in $types
        STATE $type[0] $type[1]
        #end for
    #else if $bit_offset < 0
    ITEM $name $bit_offset $bits $type "$desc"
      #for $type in $types
        STATE $type[0] $type[1]
      #end for
    #else
    APPEND_ITEM $name $bits $type "$desc"
      #for $type in $types
        STATE $type[0] $type[1]
      #end for
    #end if
    #end for

    ITEM MESSAGE 0 0 DERIVED "Formatted String for Argument"
      GENERIC_READ_CONVERSION_START STRING 0
        sprintf("${format_string}" #slurp
#for $name in $nonlen_names
, packet.read('$name') #slurp
#end for
)
      GENERIC_READ_CONVERSION_END
      META FORMAT_STRING "${format_string}"
      META ARGS #slurp
#for $name in $nonlen_names
$name #slurp
#end for

    ITEM EVR_SEVERITY 0 0 DERIVED "Severity"
      GENERIC_READ_CONVERSION_START STRING 0
        sprintf('${severity}')
      GENERIC_READ_CONVERSION_END
