<?xml version="1.0" encoding="UTF-8"?>

<!-- =====================================================================
FileManagerComponentAi.xml
Generated by fpp-to-xml
====================================================================== -->
<component namespace="Svc" name="FileManager" kind="active">

  <comment>
  A component for managing files
  </comment>

  <import_port_type>Fw/Cmd/CmdPortAi.xml</import_port_type>
  <import_port_type>Fw/Cmd/CmdRegPortAi.xml</import_port_type>
  <import_port_type>Fw/Cmd/CmdResponsePortAi.xml</import_port_type>
  <import_port_type>Fw/Log/LogPortAi.xml</import_port_type>
  <import_port_type>Fw/Log/LogTextPortAi.xml</import_port_type>
  <import_port_type>Fw/Time/TimePortAi.xml</import_port_type>
  <import_port_type>Fw/Tlm/TlmPortAi.xml</import_port_type>
  <import_port_type>Svc/Ping/PingPortAi.xml</import_port_type>

  <ports>
    <port name="LogText" data_type="Fw::LogText" kind="output" role="LogTextEvent" max_number="1">
      <comment>
      Text event port
      </comment>
    </port>
    <port name="cmdIn" data_type="Fw::Cmd" kind="input" role="Cmd" max_number="1">
      <comment>
      Command receive port
      </comment>
    </port>
    <port name="cmdRegOut" data_type="Fw::CmdReg" kind="output" role="CmdRegistration" max_number="1">
      <comment>
      Command registration port
      </comment>
    </port>
    <port name="cmdResponseOut" data_type="Fw::CmdResponse" kind="output" role="CmdResponse" max_number="1">
      <comment>
      Command response port
      </comment>
    </port>
    <port name="eventOut" data_type="Fw::Log" kind="output" role="LogEvent" max_number="1">
      <comment>
      Event port
      </comment>
    </port>
    <port name="pingIn" data_type="Svc::Ping" kind="async_input" max_number="1" full="assert">
      <comment>
      Ping input port
      </comment>
    </port>
    <port name="pingOut" data_type="Svc::Ping" kind="output" max_number="1">
      <comment>
      Ping output port
      </comment>
    </port>
    <port name="timeCaller" data_type="Fw::Time" kind="output" role="TimeGet" max_number="1">
      <comment>
      Time get port
      </comment>
    </port>
    <port name="tlmOut" data_type="Fw::Tlm" kind="output" role="Telemetry" max_number="1">
      <comment>
      Telemetry port
      </comment>
    </port>
  </ports>

  <commands>
    <command kind="async" opcode="0x0" mnemonic="CreateDirectory" full="assert">
      <comment>
      Create a directory
      </comment>
      <args>
        <arg name="dirName" type="string" size="256">
          <comment>
          The directory to create
          </comment>
        </arg>
      </args>
    </command>
    <command kind="async" opcode="0x1" mnemonic="MoveFile" full="assert">
      <comment>
      Move a file
      </comment>
      <args>
        <arg name="sourceFileName" type="string" size="256">
          <comment>
          The source file name
          </comment>
        </arg>
        <arg name="destFileName" type="string" size="256">
          <comment>
          The destination file name
          </comment>
        </arg>
      </args>
    </command>
    <command kind="async" opcode="0x2" mnemonic="RemoveDirectory" full="assert">
      <comment>
      Remove a directory, which must be empty
      </comment>
      <args>
        <arg name="dirName" type="string" size="256">
          <comment>
          The directory to remove
          </comment>
        </arg>
      </args>
    </command>
    <command kind="async" opcode="0x3" mnemonic="RemoveFile" full="assert">
      <comment>
      Remove a file
      </comment>
      <args>
        <arg name="fileName" type="string" size="256">
          <comment>
          The file to remove
          </comment>
        </arg>
      </args>
    </command>
    <command kind="async" opcode="0x4" mnemonic="ShellCommand" full="assert">
      <comment>
      Perform a Linux shell command and write the output to a log file.
      </comment>
      <args>
        <arg name="command" type="string" size="256">
          <comment>
          The shell command string
          </comment>
        </arg>
        <arg name="logFileName" type="string" size="256">
          <comment>
          The name of the log file
          </comment>
        </arg>
      </args>
    </command>
    <command kind="async" opcode="0x5" mnemonic="AppendFile" full="assert">
      <comment>
      Append 1 file's contents to the end of another.
      </comment>
      <args>
        <arg name="source" type="string" size="256">
          <comment>
          The name of the file to take content from
          </comment>
        </arg>
        <arg name="target" type="string" size="256">
          <comment>
          The name of the file to append to
          </comment>
        </arg>
      </args>
    </command>
  </commands>

  <events>
    <event id="0x0" name="DirectoryCreateError" severity="WARNING_HI" format_string="Could not create directory %s, returned status %u">
      <comment>
      An error occurred while attempting to create a directory
      </comment>
      <args>
        <arg name="dirName" type="string" size="256">
          <comment>
          The name of the directory
          </comment>
        </arg>
        <arg name="status" type="U32">
          <comment>
          The error status
          </comment>
        </arg>
      </args>
    </event>
    <event id="0x1" name="DirectoryRemoveError" severity="WARNING_HI" format_string="Could not remove directory %s, returned status %u">
      <comment>
      An error occurred while attempting to remove a directory
      </comment>
      <args>
        <arg name="dirName" type="string" size="256">
          <comment>
          The name of the directory
          </comment>
        </arg>
        <arg name="status" type="U32">
          <comment>
          The error status
          </comment>
        </arg>
      </args>
    </event>
    <event id="0x2" name="FileMoveError" severity="WARNING_HI" format_string="Could not move file %s to file %s, returned status %u">
      <comment>
      An error occurred while attempting to move a file
      </comment>
      <args>
        <arg name="sourceFileName" type="string" size="256">
          <comment>
          The name of the source file
          </comment>
        </arg>
        <arg name="destFileName" type="string" size="256">
          <comment>
          The name of the destination file
          </comment>
        </arg>
        <arg name="status" type="U32">
          <comment>
          The error status
          </comment>
        </arg>
      </args>
    </event>
    <event id="0x3" name="FileRemoveError" severity="WARNING_HI" format_string="Could not remove file %s, returned status %u">
      <comment>
      An error occurred while attempting to remove a file
      </comment>
      <args>
        <arg name="fileName" type="string" size="256">
          <comment>
          The name of the file
          </comment>
        </arg>
        <arg name="status" type="U32">
          <comment>
          The error status
          </comment>
        </arg>
      </args>
    </event>
    <event id="0x4" name="ShellCommandFailed" severity="WARNING_HI" format_string="Shell command %s failed with status %u">
      <comment>
      The File System component executed a shell command that returned status non-zero
      </comment>
      <args>
        <arg name="command" type="string" size="256">
          <comment>
          The command string
          </comment>
        </arg>
        <arg name="status" type="U32">
          <comment>
          The status code
          </comment>
        </arg>
      </args>
    </event>
    <event id="0x5" name="AppendFileFailed" severity="WARNING_HI" format_string="Appending %s onto %s failed with status %u">
      <comment>
      The File System component returned status non-zero when trying to append 2 files together
      </comment>
      <args>
        <arg name="source" type="string" size="256">
          <comment>
          The name of the file being read from
          </comment>
        </arg>
        <arg name="target" type="string" size="256">
          <comment>
          The name of the file to append to
          </comment>
        </arg>
        <arg name="status" type="U32">
          <comment>
          The error status
          </comment>
        </arg>
      </args>
    </event>
    <event id="0x6" name="AppendFileSucceeded" severity="ACTIVITY_HI" format_string="Appended %s to the end of %s">
      <comment>
      The File System component appended 2 files without error
      </comment>
      <args>
        <arg name="source" type="string" size="256">
          <comment>
          The name of the file being read from
          </comment>
        </arg>
        <arg name="target" type="string" size="256">
          <comment>
          The name of the file to append to
          </comment>
        </arg>
      </args>
    </event>
    <event id="0x7" name="ShellCommandSucceeded" severity="ACTIVITY_HI" format_string="Shell command %s succeeded">
      <comment>
      The File System component executed a shell command that returned status zero
      </comment>
      <args>
        <arg name="command" type="string" size="256">
          <comment>
          The command string
          </comment>
        </arg>
      </args>
    </event>
    <event id="0x8" name="CreateDirectorySucceeded" severity="ACTIVITY_HI" format_string="Created directory %s successfully">
      <comment>
      The File System component created a new directory without error
      </comment>
      <args>
        <arg name="dirName" type="string" size="256">
          <comment>
          The name of the directory
          </comment>
        </arg>
      </args>
    </event>
    <event id="0x9" name="RemoveDirectorySucceeded" severity="ACTIVITY_HI" format_string="Removed directory %s successfully">
      <comment>
      The File System component deleted and existing directory without error
      </comment>
      <args>
        <arg name="dirName" type="string" size="256">
          <comment>
          The name of the directory
          </comment>
        </arg>
      </args>
    </event>
    <event id="0xA" name="MoveFileSucceeded" severity="ACTIVITY_HI" format_string="Moved file %s to file %s successfully">
      <comment>
      The File System component moved a file to a new location without error
      </comment>
      <args>
        <arg name="sourceFileName" type="string" size="256">
          <comment>
          The name of the source file
          </comment>
        </arg>
        <arg name="destFileName" type="string" size="256">
          <comment>
          The name of the destination file
          </comment>
        </arg>
      </args>
    </event>
    <event id="0xB" name="RemoveFileSucceeded" severity="ACTIVITY_HI" format_string="Removed file %s successfully">
      <comment>
      The File System component deleted an existing file without error
      </comment>
      <args>
        <arg name="fileName" type="string" size="256">
          <comment>
          The name of the file
          </comment>
        </arg>
      </args>
    </event>
    <event id="0xC" name="AppendFileStarted" severity="ACTIVITY_HI" format_string="Appending file %s to the end of %s...">
      <comment>
      The File System component appended 2 files without error
      </comment>
      <args>
        <arg name="source" type="string" size="256">
          <comment>
          The name of the file being read from
          </comment>
        </arg>
        <arg name="target" type="string" size="256">
          <comment>
          The name of the file to append to
          </comment>
        </arg>
      </args>
    </event>
    <event id="0xD" name="ShellCommandStarted" severity="ACTIVITY_HI" format_string="Running shell command %s...">
      <comment>
      The File System component began executing a shell command
      </comment>
      <args>
        <arg name="command" type="string" size="256">
          <comment>
          The command string
          </comment>
        </arg>
      </args>
    </event>
    <event id="0xE" name="CreateDirectoryStarted" severity="ACTIVITY_HI" format_string="Creating directory %s...">
      <comment>
      The File System component began creating a new directory
      </comment>
      <args>
        <arg name="dirName" type="string" size="256">
          <comment>
          The name of the directory
          </comment>
        </arg>
      </args>
    </event>
    <event id="0xF" name="RemoveDirectoryStarted" severity="ACTIVITY_HI" format_string="Removing directory %s...">
      <comment>
      The File System component began deleting a directory
      </comment>
      <args>
        <arg name="dirName" type="string" size="256">
          <comment>
          The name of the directory
          </comment>
        </arg>
      </args>
    </event>
    <event id="0x10" name="MoveFileStarted" severity="ACTIVITY_HI" format_string="Moving file %s to file %s...">
      <comment>
      The File System component began moving a file to a new location
      </comment>
      <args>
        <arg name="sourceFileName" type="string" size="256">
          <comment>
          The name of the source file
          </comment>
        </arg>
        <arg name="destFileName" type="string" size="256">
          <comment>
          The name of the destination file
          </comment>
        </arg>
      </args>
    </event>
    <event id="0x11" name="RemoveFileStarted" severity="ACTIVITY_HI" format_string="Removing file %s...">
      <comment>
      The File System component began deleting an existing file
      </comment>
      <args>
        <arg name="fileName" type="string" size="256">
          <comment>
          The name of the file
          </comment>
        </arg>
      </args>
    </event>
  </events>

  <telemetry>
    <channel id="0x0" name="CommandsExecuted" data_type="U32" update="always">
      <comment>
      The total number of commands successfully executed
      </comment>
    </channel>
    <channel id="0x1" name="Errors" data_type="U32" update="always">
      <comment>
      The total number of errors
      </comment>
    </channel>
  </telemetry>

</component>
