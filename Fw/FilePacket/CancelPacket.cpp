// ======================================================================
// \title  CancelPacket.cpp
// \author bocchino
// \brief  cpp file for FilePacket::CancelPacket
//
// \copyright
// Copyright 2009-2016, by the California Institute of Technology.
// ALL RIGHTS RESERVED.  United States Government Sponsorship
// acknowledged.
//
// ======================================================================

#include <Fw/FilePacket/FilePacket.hpp>
#include <Fw/Types/Assert.hpp>

namespace Fw {

  void FilePacket::CancelPacket ::
    initialize(const U32 sequenceIndex)
  {
    this->header.initialize(FilePacket::T_CANCEL, sequenceIndex);
  }

  U32 FilePacket::CancelPacket ::
    bufferSize() const
  {
    return this->header.bufferSize();
  }

  SerializeStatus FilePacket::CancelPacket ::
    toBuffer(Buffer& buffer) const
  {
    SerialBuffer serialBuffer(
        buffer.getData(),
        buffer.getSize()
    );
    return this->header.toSerialBuffer(serialBuffer);
  }

  SerializeStatus FilePacket::CancelPacket ::
    fromSerialBuffer(SerialBuffer& serialBuffer)
  {

    FW_ASSERT(this->header.type == T_CANCEL);

    if (serialBuffer.getBuffLeft() != 0)
      return FW_DESERIALIZE_SIZE_MISMATCH;

    return FW_SERIALIZE_OK;

  }

}
