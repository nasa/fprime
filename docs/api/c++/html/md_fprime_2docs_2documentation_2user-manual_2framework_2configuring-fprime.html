<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>F´ Flight Software - C/C++ Documentation: Configuring F´</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">F´ Flight Software - C/C++ Documentation<span id="projectnumber">&#160;devel</span>
   </div>
   <div id="projectbrief">A framework for building embedded system applications to NASA flight quality standards.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md_fprime_2docs_2documentation_2user-manual_2framework_2configuring-fprime.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Configuring F´</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md245"></a></p>
<p>This guide is a first attempt to describe the various configuration settings in F´. Most users can operate with the default settings, but as the system design is finalized, some of these options may need to be changed such that the system is most efficient.</p>
<p>This guide includes:</p>
<ul>
<li>How to Configure F´</li>
<li>AcConstants.fpp</li>
<li>FpConfig.hpp<ul>
<li>Type Settings</li>
<li>Object Settings</li>
<li>Asserts</li>
<li>Port Tracing</li>
<li>Port Serialization</li>
<li>Serialization Type ID</li>
<li>Buffer Sizes</li>
<li>Text Logging</li>
<li>Misc Configuration Settings</li>
</ul>
</li>
<li>Component Configuration</li>
<li>Conclusion</li>
</ul>
<h1><a class="anchor" id="autotoc_md246"></a>
How To Configure F´</h1>
<p>All configurable files (top-level and component-specific) for F´ are available in the top-level <code>config</code> directory. By default, all deployments use the F´ provided default configuration options.</p>
<p>Projects can also take ownership of the <code>config</code> directory to provide their own <code>AcConstants.fpp</code> and configuration <code>*.hpp</code> files. To do so, copy the <code>config</code> directory into your project and use the <code>config_directory</code> options in the project's <code>settings.ini</code> file. See the <a class="el" href="md_fprime_2docs_2documentation_2user-manual_2framework_2settings.html">settings.ini guide</a> for more details.</p>
<p>The <code><a class="el" href="_fp_config_8h.html" title="C-compatible configuration header for fprime configuration.">FpConfig.h</a></code> file is a C header allowing the user to define global settings. Where components allow specific configuration, a <code>&lt;component&gt;Cfg.hpp</code> is available to be modified as well.</p>
<h1><a class="anchor" id="autotoc_md247"></a>
AcConstants.fpp</h1>
<p><code>AcConstants.fpp</code> is used to set the constants for the autocoded components provided by the framework. This allows projects to appropriately size the number of ports provided by many of the command and data handling components defined in the <code><a class="el" href="namespace_svc.html">Svc</a></code> package.</p>
<p>!!! note Internal configurations like table sizes are set in the component-specific header as these settings aren't autocoded. See: Component Configuration</p>
<p>These settings may need to be increased for large projects with many components, or minimized for projects with a small number of components.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Setting   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Default   </th><th class="markdownTableHeadNone">Valid Values    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ActiveRateGroupOutputPorts   </td><td class="markdownTableBodyNone">Number of outputs from active rate group. Limits number of components attached to a single rate group   </td><td class="markdownTableBodyNone">10   </td><td class="markdownTableBodyNone">Positive integer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CmdDispatcherComponentCommandPorts   </td><td class="markdownTableBodyNone">Number of command and command registration ports. Limits number of components handling commands   </td><td class="markdownTableBodyNone">30   </td><td class="markdownTableBodyNone">Positive integer    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CmdDispatcherSequencePorts   </td><td class="markdownTableBodyNone">Number of incoming ports to command dispatcher, e.g. uplink and command sequencer   </td><td class="markdownTableBodyNone">5   </td><td class="markdownTableBodyNone">Positive integer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">RateGroupDriverRateGroupPorts   </td><td class="markdownTableBodyNone">Number of rate group driver output ports. Limits total number of different rate groups   </td><td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">Positive integer    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">HealthPingPorts   </td><td class="markdownTableBodyNone">Number of health ping output ports. Limits number of components attached to health component   </td><td class="markdownTableBodyNone">25   </td><td class="markdownTableBodyNone">Positive integer   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md248"></a>
FpConfig.h</h1>
<p>Some configurations may be changed during compilation time. The F′ framework has a number of optional features that can be enabled or disabled by editing the <code><a class="el" href="_fp_config_8h.html" title="C-compatible configuration header for fprime configuration.">config/FpConfig.h</a></code> file. These changes affect of the whole of the F´ deployment. Users can change or override defined <em>C</em> macro values that activate or disable code by using compiler flags for different deployment settings. During flight software (FSW) execution, disabling unnecessary features saves memory and CPU cycles.</p>
<p>All of these settings should be set in <code><a class="el" href="_fp_config_8h.html" title="C-compatible configuration header for fprime configuration.">FpConfig.h</a></code> and for most projects, this whole file will be cloned and owned for their specific settings. Typically, the user will define the setting to be 0 for off and 1 for on.</p>
<p>e.g. </p><div class="fragment"><div class="line"><span class="preprocessor">#define FW_SOME_SETTING 1</span></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md249"></a>
Type Settings</h2>
<p>Many architectures support different sizes of types. In addition, projects may wish to change the size of the various custom types specified in the framework. This section will describe these settings. These are typically provided by the and can be changed in the <code><a class="el" href="_fp_config_8h.html" title="C-compatible configuration header for fprime configuration.">FpConfig.h</a></code> header. These types are described in the <a href="../design/numerical-types.md#configurable-integer-types">numerical types design document</a>.</p>
<p>The above document also describes the methods for configuring the configurable types used to adjust various fprime types.</p>
<h2><a class="anchor" id="autotoc_md250"></a>
IEEE 754 compliance of the floating point implementation</h2>
<p>!!! note this configuration is performed in the <code>PlatformTypes.h</code> header as it is platform dependent and not project dependent.</p>
<p>Some industrial coding rules for safety and critical systems require floating point implementations to conform to a defined floating point standard, such as IEEE 754. The reason for this is that if the implementation does not conform to a standard, it can lead to problems with the accuracy and reliability of calculations.</p>
<p>By default, F´ checks for IEEE754 compliant floating point arithmetic at compile time. However, if a user does not have a C++11 implementation on their platform that supports IEEE754 floating point arithmetic, an option is provided to bypass this check:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Macro   </th><th class="markdownTableHeadNone">Definition   </th><th class="markdownTableHeadNone">Default   </th><th class="markdownTableHeadNone">Valid Values    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">SKIP_FLOAT_IEEE_754_COMPLIANCE   </td><td class="markdownTableBodyNone">Skip IEEE 754 compliance check of floating point implementation.   </td><td class="markdownTableBodyNone">0 (off)   </td><td class="markdownTableBodyNone">0 (off) 1 (on)   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md251"></a>
Time Base and Time Context</h3>
<p>The F′ time tags have a field that specifies the time base of the time tag. A time base is defined as a clock in the system correlated with a known epoch. It is often the case that when a system is being initialized, it does not always have access to a clock correlated to external operations. It can transition through several time bases (processor, radio, Earth) on the way to becoming fully operational. The TimeBase type defines the set of clocks in the system that can produce a time tag. It lets users of the system see which clock was used when time tagging telemetry.</p>
<p>Time contexts are another value associated with time.</p>
<p>!!! warning Changes to this value must be done in tandem with the F´ GDS for F´ GDS features to work. Thus most projects don't modify these settings just like the types defined above.</p>
<div class="fragment"><div class="line"><span class="keyword">enum</span> <a class="code hl_enumeration" href="_fp_config_8h.html#a010a00650fb5274595ddba8b03a0d17f">TimeBase</a> {</div>
<div class="line">    <a class="code hl_enumvalue" href="_fp_config_8h.html#a010a00650fb5274595ddba8b03a0d17fae1020621e865e138f091cfeeabcddc2c">TB_NONE</a>, </div>
<div class="line">    <a class="code hl_enumvalue" href="_fp_config_8h.html#a010a00650fb5274595ddba8b03a0d17faad20439337171453957a14c47bc408ba">TB_PROC_TIME</a>, </div>
<div class="line">    <a class="code hl_enumvalue" href="_fp_config_8h.html#a010a00650fb5274595ddba8b03a0d17fa1dd6d7e7cebd21c500e8170e4c179701">TB_WORKSTATION_TIME</a>, </div>
<div class="line">    <a class="code hl_enumvalue" href="_fp_config_8h.html#a010a00650fb5274595ddba8b03a0d17fa8ecb61139c442da34f6ab52b008966d4">TB_DONT_CARE</a> = 0xFFFF </div>
<div class="line">};</div>
<div class="ttc" id="a_fp_config_8h_html_a010a00650fb5274595ddba8b03a0d17f"><div class="ttname"><a href="_fp_config_8h.html#a010a00650fb5274595ddba8b03a0d17f">TimeBase</a></div><div class="ttdeci">TimeBase</div><div class="ttdef"><b>Definition</b> <a href="_fp_config_8h_source.html#l00056">FpConfig.h:56</a></div></div>
<div class="ttc" id="a_fp_config_8h_html_a010a00650fb5274595ddba8b03a0d17fa1dd6d7e7cebd21c500e8170e4c179701"><div class="ttname"><a href="_fp_config_8h.html#a010a00650fb5274595ddba8b03a0d17fa1dd6d7e7cebd21c500e8170e4c179701">TB_WORKSTATION_TIME</a></div><div class="ttdeci">@ TB_WORKSTATION_TIME</div><div class="ttdoc">Time as reported on workstation where software is running. For testing.</div><div class="ttdef"><b>Definition</b> <a href="_fp_config_8h_source.html#l00059">FpConfig.h:59</a></div></div>
<div class="ttc" id="a_fp_config_8h_html_a010a00650fb5274595ddba8b03a0d17fa8ecb61139c442da34f6ab52b008966d4"><div class="ttname"><a href="_fp_config_8h.html#a010a00650fb5274595ddba8b03a0d17fa8ecb61139c442da34f6ab52b008966d4">TB_DONT_CARE</a></div><div class="ttdeci">@ TB_DONT_CARE</div><div class="ttdoc">Don't care value for sequences. If FwTimeBaseStoreType is changed, value should be changed.</div><div class="ttdef"><b>Definition</b> <a href="_fp_config_8h_source.html#l00062">FpConfig.h:60</a></div></div>
<div class="ttc" id="a_fp_config_8h_html_a010a00650fb5274595ddba8b03a0d17faad20439337171453957a14c47bc408ba"><div class="ttname"><a href="_fp_config_8h.html#a010a00650fb5274595ddba8b03a0d17faad20439337171453957a14c47bc408ba">TB_PROC_TIME</a></div><div class="ttdeci">@ TB_PROC_TIME</div><div class="ttdoc">Indicates time is processor cycle time. Not tied to external time.</div><div class="ttdef"><b>Definition</b> <a href="_fp_config_8h_source.html#l00058">FpConfig.h:58</a></div></div>
<div class="ttc" id="a_fp_config_8h_html_a010a00650fb5274595ddba8b03a0d17fae1020621e865e138f091cfeeabcddc2c"><div class="ttname"><a href="_fp_config_8h.html#a010a00650fb5274595ddba8b03a0d17fae1020621e865e138f091cfeeabcddc2c">TB_NONE</a></div><div class="ttdeci">@ TB_NONE</div><div class="ttdoc">No time base has been established.</div><div class="ttdef"><b>Definition</b> <a href="_fp_config_8h_source.html#l00057">FpConfig.h:57</a></div></div>
</div><!-- fragment --><p>Time base and time context usage may be turned on and off using the macros shown below:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Macro   </th><th class="markdownTableHeadNone">Definition   </th><th class="markdownTableHeadNone">Default   </th><th class="markdownTableHeadNone">Valid Values    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FW_USE_TIME_BASE   </td><td class="markdownTableBodyNone">Enables the time base Fw::time field   </td><td class="markdownTableBodyNone">1 (on)   </td><td class="markdownTableBodyNone">0 (off) 1 (on)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">FW_USE_TIME_CONTEXT   </td><td class="markdownTableBodyNone">Enables the time context Fw::time field   </td><td class="markdownTableBodyNone">1 (on)   </td><td class="markdownTableBodyNone">0 (off) 1 (on)   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md252"></a>
Object Settings</h2>
<p>The architecture allows for various settings to control, monitor, and trace objects in the system. These settings typically result in a larger binary size but make the framework and system easier to debug. This section includes a discussion of OS objects like Tasks and Queues as well.</p>
<h3><a class="anchor" id="autotoc_md253"></a>
Object Naming</h3>
<p>The architecture can store names for each object created. This is useful when using object registries or tracing to see what objects exist and how they interact. The object naming does increase the per-object storage and code size, so in a resource-constrained environment, disabling this feature might be desirable. This macro should be used in developer implementation classes to call the correct constructor in the code-generated base classes. Table 35 provides the macros related to this feature.</p>
<p>The <code><a class="el" href="class_os_1_1_queue.html">Os::Queue</a></code> class stores a queue name as private data. Table 35 provides the macro for this feature. The <code><a class="el" href="class_os_1_1_task.html">Os::Task</a></code> class stores a task name as private data. Table 35 provides the macro for this feature as well.</p>
<p><b>Table 35.</b> Macros for object naming, queue naming, and task naming</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Macro   </th><th class="markdownTableHeadNone">Definition   </th><th class="markdownTableHeadNone">Default   </th><th class="markdownTableHeadNone">Valid Values    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FW_OBJECT_NAMES   </td><td class="markdownTableBodyNone">Enables storage and retrieval of the name   </td><td class="markdownTableBodyNone">1 (on)   </td><td class="markdownTableBodyNone">0 (off) 1 (on)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">FW_OBJ_NAME_BUFFER_SIZE   </td><td class="markdownTableBodyNone">Size of the buffer storing the object name   </td><td class="markdownTableBodyNone">80   </td><td class="markdownTableBodyNone">Positive integer    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FW_QUEUE_NAME_BUFFER_SIZE   </td><td class="markdownTableBodyNone">Size of the buffer storing the queue names   </td><td class="markdownTableBodyNone">80   </td><td class="markdownTableBodyNone">Positive integer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">FW_TASK_NAME_BUFFER_SIZE   </td><td class="markdownTableBodyNone">Size of the buffer storing task names   </td><td class="markdownTableBodyNone">80   </td><td class="markdownTableBodyNone">Positive integer   </td></tr>
</table>
<p>!!! note The macro <code>FW_OPTIONAL_NAME("string")</code> can be used to conditionally return the given string or an empty string depending on whether <code>FW_OBJECT_NAMES</code> is on. This can be used to strip out component names from code when building without <code>FW_OBJECT_NAMES</code>.</p>
<p>!!! note If the size of the string passed to the code-generated component base classes is larger than this size, the string will be truncated. <code>FW_OBJECT_NAMES</code> must be turned on for <code>FW_OBJ_NAME_BUFFER_SIZE</code> to have any effect.</p>
<p>!!! note <code>FW_QUEUE_NAME_BUFFER_SIZE</code> and <code>FW_TASK_NAME_BUFFER_SIZE</code> are only used if <code>FW_OBJECT_NAMES</code> is <b>turned off</b>. Otherwise, the supplied object name is used.</p>
<h3><a class="anchor" id="autotoc_md254"></a>
Object to String</h3>
<p>The framework port and object classes have an optional <code>toString()</code> method. This method by default returns the instance name of the object, but <code>toString()</code> is defined as a virtual method so a developer class can override this and provide custom information. Table 36 provides the macros to configure this feature.</p>
<p>!!! note For these settings to work <code>FW_OBJECT_NAMES</code> must be turned on.</p>
<p><b>Table 36.</b> Macros for object to string.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Macro   </th><th class="markdownTableHeadNone">Definition   </th><th class="markdownTableHeadNone">Default   </th><th class="markdownTableHeadNone">Valid Values    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FW_OBJECT_TO_STRING   </td><td class="markdownTableBodyNone">Enables the toString() method   </td><td class="markdownTableBodyNone">1 (on)   </td><td class="markdownTableBodyNone">0 (off) 1 (on)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">FW_OBJ_TO_STRING_BUFFER_SIZE   </td><td class="markdownTableBodyNone">Defines buffer size used to store toString() results   </td><td class="markdownTableBodyNone">255   </td><td class="markdownTableBodyNone">Positive integer    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FW_SERIALIZABLE_TO_STRING   </td><td class="markdownTableBodyNone">Defines a toString() method for code-generated serializable   </td><td class="markdownTableBodyNone">1 (on)   </td><td class="markdownTableBodyNone">0 (off) 1 (on)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">FW_SERIALIZABLE_TO_STRING_BUFFER_SIZE   </td><td class="markdownTableBodyNone">Defines buffer size of toString() result for serializables   </td><td class="markdownTableBodyNone">255   </td><td class="markdownTableBodyNone">Positive integer    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FW_ARRAY_TO_STRING   </td><td class="markdownTableBodyNone">Defines a toString() method for code-generated arrays   </td><td class="markdownTableBodyNone">1 (on)   </td><td class="markdownTableBodyNone">0 (off) 1 (on)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">FW_ARRAY_TO_STRING_BUFFER_SIZE   </td><td class="markdownTableBodyNone">Defines buffer size of toString() result for arrays   </td><td class="markdownTableBodyNone">256   </td><td class="markdownTableBodyNone">Positive integer   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md255"></a>
Object Registry</h3>
<p>An object registry is a class that holds a list of framework component and port objects. The registry can be used to list all the objects, or call common functions on all objects. A base class for the object registry is defined in <code><a class="el" href="_obj_base_8hpp.html" title="Declarations for Fw::ObjBase and Fw::ObjRegistry.">Fw/Obj/ObjBase.hpp</a></code>, and a simple implementation can be found in <code><a class="el" href="_simple_obj_registry_8hpp.html" title="Class declaration for a simple object registry.">Fw/Obj/SimpleObjRegistry.hpp</a></code>. Table 37 provides the macros to configure this feature. Message queues allow for their own registration such that the project may track them as well.</p>
<p><b>Table 37.</b> Macros for object registry.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Macro   </th><th class="markdownTableHeadNone">Definition   </th><th class="markdownTableHeadNone">Default   </th><th class="markdownTableHeadNone">Valid Values    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FW_OBJECT_REGISTRATION   </td><td class="markdownTableBodyNone">Enables object registries.   </td><td class="markdownTableBodyNone">1 (on)   </td><td class="markdownTableBodyNone">0 (off) 1 (on)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">FW_OBJ_SIMPLE_REG_ENTRIES   </td><td class="markdownTableBodyNone">The size of the array in the simple object registry used to store objects.   </td><td class="markdownTableBodyNone">500   </td><td class="markdownTableBodyNone">Positive integer    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FW_OBJ_SIMPLE_REG_BUFF_SIZE   </td><td class="markdownTableBodyNone">The size of the buffer used to store object names in the simple registry.   </td><td class="markdownTableBodyNone">255   </td><td class="markdownTableBodyNone">Positive integer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">FW_QUEUE_REGISTRATION   </td><td class="markdownTableBodyNone">Enables queue registries.   </td><td class="markdownTableBodyNone">1 (on)   </td><td class="markdownTableBodyNone">0 (off) 1 (on)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FW_QUEUE_SIMPLE_QUEUE_ENTRIES   </td><td class="markdownTableBodyNone">The size of the array in the simple object registry used to store queues.   </td><td class="markdownTableBodyNone">100   </td><td class="markdownTableBodyNone">Positive integer   </td></tr>
</table>
<p>!!! note <code>FW_OBJECT_REGISTRATION</code> must be turned on for <code>FW_OBJ_SIMPLE_REG_ENTRIES</code> and <code>FW_OBJ_SIMPLE_REG_BUFF_SIZE</code> to have any effect.</p>
<p>!!! note See table 35 for configuring queue name sizes.</p>
<h2><a class="anchor" id="autotoc_md256"></a>
Asserts</h2>
<p>The assert feature is described in <a class="el" href="md_fprime_2docs_2documentation_2user-manual_2framework_2assert.html">F´ Asserts</a>. This configuration allows a project to turn asserts off, use hash IDs for the assert message, or use full filenames for the assert message. Table 38 provides ways that asserts can be configured.</p>
<p><b>Table 38.</b> Macros for assert.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Macro   </th><th class="markdownTableHeadNone">Definition   </th><th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone">Default    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FW_ASSERT_LEVEL   </td><td class="markdownTableBodyNone">Sets the assert report level to:   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">FW_FILENAME_ASSERT    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><b>Value</b>   </td><td class="markdownTableBodyNone"><b>Definition</b>   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">FW_NO_ASSERT   </td><td class="markdownTableBodyNone">Asserts turned off, removing all assert code.   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">FW_FILEID_ASSERT   </td><td class="markdownTableBodyNone">Asserts turned on, hash value used in place of <b>FILE</b> on message   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">FW_FILENAME_ASSERT   </td><td class="markdownTableBodyNone">Asserts turned on, <b>FILE</b> macro is used in the assert message   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">FW_ASSERT_TEXT_SIZE   </td><td class="markdownTableBodyNone">The buffer size used to store the assert message   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">120   </td></tr>
</table>
<p>Setting assert level <code>FW_FILEID_ASSERT</code> saves a lot of code space since no file name is stored. The make system supplies this to the compiler by hashing the file name. The original filename can be recovered by running <code>fprime-util hash-to-file &lt;hash&gt;</code>.</p>
<p>Setting assert level to <code>FW_ASSERT_TEXT_SIZE</code> can ease debugging asserts, but typically <code>FW_ASSERT_TEXT_SIZE</code> must be increased as most file name paths are longer than 120.</p>
<h2><a class="anchor" id="autotoc_md257"></a>
Port Tracing</h2>
<p>When components are interconnected, it is often useful to trace the set of invocations through components and ports. The port base class has a <code>trace()</code> call that is invoked by the derived port classes whenever the port is invoked. The <code>trace()</code> calls <code>Os::Log::log()</code> with the name of the port once the port base class method <code>setTrace()</code> has been called. Individual ports can have tracing turned on and off by calling the <code>overrideTrace()</code> method on the port instance. Table 39 provides the macro to configure this feature.</p>
<p><b>Table 39.</b> Macro for port tracing.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Macro   </th><th class="markdownTableHeadNone">Definition   </th><th class="markdownTableHeadNone">Default   </th><th class="markdownTableHeadNone">Valid Values    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FW_PORT_TRACING   </td><td class="markdownTableBodyNone">Enables port tracing.   </td><td class="markdownTableBodyNone">1 (on)   </td><td class="markdownTableBodyNone">0 (off) 1 (on)   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md258"></a>
Port Serialization</h2>
<p>As discussed in the user guide, a port type (Input/OutputSerializePort) exists that has no interface type, but instead receives (or sends) a serialized form of the port invocation for the attached port. The primary pattern for this is to invoke components on remote nodes. The code generator generates code in each port that will serialize or deserialize the invocation if it detects that it is connected to a serializing port. If development is for a single node, this feature can be disabled to reduce the code size. Table 40 provides the macro to configure this feature.</p>
<p><b>Table 40.</b> Macro for port serialization.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Macro   </th><th class="markdownTableHeadNone">Definition   </th><th class="markdownTableHeadNone">Default   </th><th class="markdownTableHeadNone">Valid Values    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FW_PORT_SERIALIZATION   </td><td class="markdownTableBodyNone">Enables port serialization.   </td><td class="markdownTableBodyNone">1 (on)   </td><td class="markdownTableBodyNone">0 (off) 1 (on)   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md259"></a>
Serializable Type ID</h2>
<p>As described <a class="el" href="md_fprime_2docs_2documentation_2user-manual_2overview_2enum-arr-ser.html">in serializable types</a>, serializable types can be defined for use in the code. When objects of those types are serialized, an integer representing the type ID can be serialized along with the object data. This allows the type to be determined later if only the serialized form is available. Turning off this feature will lower the amount of data moved around for a given object when it is serialized. Table 41 provides the macros to configure this feature.</p>
<p><b>Table 41.</b> Macros for serializable type ID.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Macro   </th><th class="markdownTableHeadNone">Definition   </th><th class="markdownTableHeadNone">Default   </th><th class="markdownTableHeadNone">Valid Values    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FW_SERIALIZATION_TYPE_ID   </td><td class="markdownTableBodyNone">Enables serializing the type ID   </td><td class="markdownTableBodyNone">0 (off)   </td><td class="markdownTableBodyNone">0 (off) 1 (on)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">FW_SERIALIZATION_TYPE_ID_BYTES   </td><td class="markdownTableBodyNone">Defines size of serialization ID   </td><td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">1 - 4   </td></tr>
</table>
<p>!!! note Smaller values for <code>FW_SERIALIZATION_TYPE_ID_BYTES</code> means that less data storage is needed, but also limits the number of types that can be defined. <code>FW_SERIALIZATION_TYPE_ID</code> is required to have type IDs in the buffer and thus to introspect what type is contained in the buffer.</p>
<h2><a class="anchor" id="autotoc_md260"></a>
Buffer Sizes</h2>
<p>Many of the built-in F´ data types define buffer sizes that allow them to be passed as a com buffer type, sent out through the ground interface, serialized, and more. This section will discuss the com buffer configuration, command, channel, event, parameter, and other buffer size arguments.</p>
<p>The com buffer must be able to store all the other types such that they can all be passed as generic communication. Thus <code>FW_COM_BUFFER_MAX_SIZE</code> must be large enough to hold each buffer size <b>and</b> the header data for each type. Thus these settings are typically derived and this is done by default.</p>
<p>!!! warning only modify the comm buffer size to ensure that there will be no faults in the system.</p>
<p>In all cases, these definitions are global for each type in the system. Thus the buffer <b>must</b> be large enough to hold the data for the largest of a given type in the system. An assert will result if the buffer is set too small. i.e. the <code>FW_CMD_ARG_BUFFER_MAX_SIZE</code> cannot be smaller than the serialized size of the command with the largest arguments.</p>
<p>These types also provide optional string sizes for their constituent pieces. However, the <code>MAX_STRING_SIZE</code> settings must <b>always</b> be smaller than the <code>BUFFER_MAX_SIZE</code>. i.e. the command string max size cannot be larger than the command buffer max size, as the string is serialized into the buffer.</p>
<p>Commands serialize argument values into these buffers. Events (aka log events) also serialize just the arguments. Channelized telemetry and parameters serialize the values. Other information like event strings is not serialized but rather reconstructed when needed from the dictionary. This is all placed in a comm buffer.</p>
<p>Table 42 provides the macros to configure these features.</p>
<p><b>Table 42.</b> Macros for buffers.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Macro   </th><th class="markdownTableHeadNone">Definition   </th><th class="markdownTableHeadNone">Default   </th><th class="markdownTableHeadNone">Valid Values    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FW_COM_BUFFER_MAX_SIZE   </td><td class="markdownTableBodyNone">Defines the size of a com buffer   </td><td class="markdownTableBodyNone">128   </td><td class="markdownTableBodyNone">Positive integer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">FW_CMD_ARG_BUFFER_MAX_SIZE   </td><td class="markdownTableBodyNone">Defines the size of command argument buffers   </td><td class="markdownTableBodyNone">Derived   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FW_CMD_STRING_MAX_SIZE   </td><td class="markdownTableBodyNone">Defines the maximum size of a command string argument   </td><td class="markdownTableBodyNone">40   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">FW_LOG_BUFFER_MAX_SIZE   </td><td class="markdownTableBodyNone">Defines the size of event buffers   </td><td class="markdownTableBodyNone">Derived   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FW_LOG_STRING_MAX_SIZE   </td><td class="markdownTableBodyNone">Defines the maximum size of an event string argument   </td><td class="markdownTableBodyNone">100   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">FW_TLM_BUFFER_MAX_SIZE   </td><td class="markdownTableBodyNone">Defines the size of telemetry channel buffers   </td><td class="markdownTableBodyNone">Derived   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FW_TLM_STRING_MAX_SIZE   </td><td class="markdownTableBodyNone">Defines the maximum size of a channel string value   </td><td class="markdownTableBodyNone">40   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">FW_PRM_BUFFER_MAX_SIZE   </td><td class="markdownTableBodyNone">Defines the size of parameter buffers   </td><td class="markdownTableBodyNone">Derived   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FW_PRM_STRING_MAX_SIZE   </td><td class="markdownTableBodyNone">Defines the maximum size of a parameter string value   </td><td class="markdownTableBodyNone">40   </td><td class="markdownTableBodyNone"></td></tr>
</table>
<p>Other Buffers are defined in the system for specific purposes. These do not need to fit inside a comm buffer, and thus are less restrictive in size.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Macro   </th><th class="markdownTableHeadNone">Definition   </th><th class="markdownTableHeadNone">Default   </th><th class="markdownTableHeadNone">Valid Values    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FW_FILE_BUFFER_MAX_SIZE   </td><td class="markdownTableBodyNone">Defines buffer and chunk size for file uplink and downlink   </td><td class="markdownTableBodyNone">255   </td><td class="markdownTableBodyNone">Positive integer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">FW_INTERNAL_INTERFACE_STRING_MAX_SIZE   </td><td class="markdownTableBodyNone">Maximum size for interface string   </td><td class="markdownTableBodyNone">40   </td><td class="markdownTableBodyNone">Positive integer   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md261"></a>
Text Logging</h2>
<p>Event functions that are called are turned into two output port calls. One is a binary port that is used to store the event to be transported to ground software or a testing interface external to the software. The component also takes the format string specified in the XML and populates it with the event arguments, and calls an output port with a readable text version of the event. This is meant to be used for a console interface so the user can see, in text form, the same events being stored for transmission. A component with the text logging input port can be used to display the text. A very simple implementation of this can be seen in <code>Svc/PassiveConsoleTextLogger</code>. In a resource-constrained environment or in a flight implementation where the console is not viewable, the text formatting and extra code can consume an undesirable number of processor cycles. For this reason, the text logging can be turned off via a macro. This compiles out the code and format strings for text logging. Table 46 provides the macros to configure text logging.</p>
<p><b>Table 46.</b> Macros for text logging.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Macro   </th><th class="markdownTableHeadNone">Definition   </th><th class="markdownTableHeadNone">Default   </th><th class="markdownTableHeadNone">Valid Values    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FW_ENABLE_TEXT_LOGGING   </td><td class="markdownTableBodyNone">Enables or disables text logging   </td><td class="markdownTableBodyNone">1 (on)   </td><td class="markdownTableBodyNone">0 (off) 1 (on)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">FW_LOG_TEXT_BUFFER_SIZE   </td><td class="markdownTableBodyNone">Maximum size of the textual representation of the event   </td><td class="markdownTableBodyNone">256   </td><td class="markdownTableBodyNone">Positive integer   </td></tr>
</table>
<p>!!! note The <code>FW_LOG_TEXT_BUFFER_SIZE</code> should be large enough to store the full event including its text format string after being populated with arguments.</p>
<h2><a class="anchor" id="autotoc_md262"></a>
Misc Configuration Settings</h2>
<p>This setting describes some of the other settings available in <code><a class="el" href="_fp_config_8hpp.html" title="C++-compatible configuration header for fprime configuration.">FpConfig.hpp</a></code> and did not fit in other sections. These are described in the tables below.</p>
<p>Table 47 describes other user settings.</p>
<p><b>Table 47.</b> Misc macros available to the user.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Macro   </th><th class="markdownTableHeadNone">Definition   </th><th class="markdownTableHeadNone">Default   </th><th class="markdownTableHeadNone">Valid Values    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FW_CMD_CHECK_RESIDUAL   </td><td class="markdownTableBodyNone">Enables command serialization extra bytes check   </td><td class="markdownTableBodyNone">1 (on)   </td><td class="markdownTableBodyNone">0 (off) 1 (on)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">FW_AMPCS_COMPATIBLE   </td><td class="markdownTableBodyNone">Adds argument sizes to event argument serialization   </td><td class="markdownTableBodyNone">0 (off)   </td><td class="markdownTableBodyNone">0 (off) 1 (on)   </td></tr>
</table>
<p>!!! note Normally when a command is deserialized, the handler checks to see if there are any leftover bytes in the buffer. If there are, it assumes that the command was corrupted somehow since the serialized size should match the serialized size of the argument list. In some cases, command buffers are padded so the data can be larger than the serialized size of the command. Turning <code>FW_CMD_CHECK_RESIDUAL</code> off can disable this check and allow leftover bytes.</p>
<p>!!! note Some ground systems require the size of the event argument to be serialized into the buffer instead of predicting the size using the dictionary. Setting <code>FW_AMPCS_COMPATIBLE</code> will serialize these sizes into the event buffers <b>and</b> break compatibility with the F´ ground system as it does not use this feature.</p>
<p>!!! warning The following settings are defined by the build system and are in <code><a class="el" href="_fp_config_8hpp.html" title="C++-compatible configuration header for fprime configuration.">FpConfig.hpp</a></code> to provide a default off value. These must be set by the build system as the setting works in unison with other modules that the build system includes when enabling these settings.</p>
<p>Table 48 describes settings defined by the build system that should never be hand-set.</p>
<p><b>Table 48.</b> Macros for use by build system only</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Macro   </th><th class="markdownTableHeadNone">Definition   </th><th class="markdownTableHeadNone">Default   </th><th class="markdownTableHeadNone">Valid Values    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FW_BAREMETAL_SCHEDULER   </td><td class="markdownTableBodyNone">Enables baremetal scheduler hooks in active components   </td><td class="markdownTableBodyNone">0 (off)   </td><td class="markdownTableBodyNone">0 (off) 1 (on)   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md263"></a>
Component Configuration</h1>
<p>Component configurations are also provided as part of the project's config directory. If the directory is not provided, then the default from the framework is used. <b>Remember:</b> if the project overrides any configuration, that new directory must contain all the component headers as well as the <code><a class="el" href="_fp_config_8hpp.html" title="C++-compatible configuration header for fprime configuration.">FpConfig.hpp</a></code> as C++ prevents including individual headers.</p>
<p>These component headers follow the form <code>&lt;Component&gt;Cfg.hpp</code> and allows a project to set the configuration for each component's C++ implementation. This is typically to set maximum sizes for tables, and other static memory allocations. Some components allow users to turn on and off features. If a component does not have a header, it has no configuration for the user to set.</p>
<p>Users are encouraged to look through the header for the component of interest as they should be self-descriptive.</p>
<h1><a class="anchor" id="autotoc_md264"></a>
Conclusion</h1>
<p>The user should now have a very detailed understanding of how to configure F´. Although there are some automatic checks built into F´ to check for some invalid configurations, the user should take care to understand the implication of changes to these settings. The F´ team sincerely hopes this bombardment of information will prove useful. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
