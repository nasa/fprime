<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>F´ Flight Software - C/C++ Documentation: Communication Adapter Interface</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">F´ Flight Software - C/C++ Documentation
   &#160;<span id="projectnumber">Latest</span>
   </div>
   <div id="projectbrief">A framework for building embedded system applications to NASA flight quality standards.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_docs__design_communication_adapter_interface.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Communication Adapter Interface </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Any communication component (e.g. a radio component) that is intended for use with the standard F´ uplink and downlink stack should implement the <em>Communication Adapter Interface</em>. This interface specifies both the ports and protocols used to operate with the standard F´ uplink and downlink components.</p>
<p>Implementors of this interface are referred to as <em>Communication Adapters</em>.</p>
<p><img src="./img/com-adapter.png" alt="Communication Adapter Interface" class="inline"/></p>
<p>The communication adapter interface protocol is designed to work alongside the framer status protocol and the com queue protocol to ensure that data messages do not overload a communication interface. These protocols are discussed below.</p>
<h1><a class="anchor" id="autotoc_md24"></a>
Ports</h1>
<p>The communication adapter interface is composed of three ports. These ports are used to transmit outgoing data through some communication hardware and receive incoming data from that same hardware. These ports share types with the byte stream driver model for backwards compatibility.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Kind   </th><th class="markdownTableHeadNone">Suggested Name   </th><th class="markdownTableHeadNone">Port Type   </th><th class="markdownTableHeadNone">Usage    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>input</code>   </td><td class="markdownTableBodyNone"><code>comDataIn</code>   </td><td class="markdownTableBodyNone"><code>Drv.ByteStreamSend</code>   </td><td class="markdownTableBodyNone">Port receiving <code><a class="el" href="class_fw_1_1_buffer.html">Fw::Buffer</a></code> objects for outgoing transmission.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>output</code>   </td><td class="markdownTableBodyNone"><code>comDataOut</code>   </td><td class="markdownTableBodyNone"><code>Drv.ByteStreamRecv</code>   </td><td class="markdownTableBodyNone">Port producing incoming <code><a class="el" href="class_fw_1_1_buffer.html">Fw::Buffer</a></code> objects.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>output</code>   </td><td class="markdownTableBodyNone"><code>comStatus</code>   </td><td class="markdownTableBodyNone"><code>Fw.SuccessCondition</code>   </td><td class="markdownTableBodyNone">Port indicating status of outgoing transmission. See protocol.   </td></tr>
</table>
<blockquote class="doxtable">
<p>Note: components implementing the <em>Communication Adapter Interface</em> must deallocate any <code><a class="el" href="class_fw_1_1_buffer.html">Fw::Buffer</a></code> received on the <code>comDataIn</code> port or must delegate the deallocation to another component (e.g. a driver). See <a class="el" href="md_docs__design_memory.html">Memory Management in F´</a> </p>
</blockquote>
<h2><a class="anchor" id="autotoc_md25"></a>
comDataIn Description</h2>
<p>This port receives data from an F´ application in the form of an argument of <code><a class="el" href="class_fw_1_1_buffer.html">Fw::Buffer</a></code> type. This data is intended to be sent out the communications interface managed by this component. From the perspective of the application this is the outgoing data port.</p>
<h2><a class="anchor" id="autotoc_md26"></a>
comDataOut Description</h2>
<p>This port receives data from the communication interface managed by this component and provides it to the F´ application in the form of an argument of <code><a class="el" href="class_fw_1_1_buffer.html">Fw::Buffer</a></code> type. From the perspective of the application this is the incoming data port.</p>
<h2><a class="anchor" id="autotoc_md27"></a>
comStatus Description</h2>
<p>This port carries a status of <code>Fw::Success::SUCCESS</code> or <code>Fw::Success::FAILURE</code> typically in response to a call to the <code>comDataIn</code> port described above.</p>
<blockquote class="doxtable">
<p>Note: it is critical to obey the protocol as described in the protocol section below. </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md28"></a>
Communication Queue Protocol</h1>
<p><code><a class="el" href="class_svc_1_1_com_queue.html">Svc::ComQueue</a></code> queues messages until the communication adapter is ready to receive these messages. For each Fw::Success::SUCCESS message received, <code><a class="el" href="class_svc_1_1_com_queue.html">Svc::ComQueue</a></code> will emit one message. <code><a class="el" href="class_svc_1_1_com_queue.html">Svc::ComQueue</a></code> will not emit messages at any other time. This implies several things:</p>
<ol type="1">
<li>An initial <code>Fw::Success::SUCCESS</code> message must be sent to <code><a class="el" href="class_svc_1_1_com_queue.html">Svc::ComQueue</a></code> to initiate data flow</li>
<li>A <code>Fw::Success::SUCCESS</code> must be eventually received in response to each message for data to continue to flow</li>
</ol>
<p>These implications are discussed in more depth in the appropriate protocol sections.</p>
<h1><a class="anchor" id="autotoc_md29"></a>
Framer Status Protocol</h1>
<p>Framing typically happens between <code><a class="el" href="class_svc_1_1_com_queue.html">Svc::ComQueue</a></code> and a communications adapter. The <code><a class="el" href="class_svc_1_1_framer.html" title="Generic framing component using FramingProtocol implementation for actual framing.">Svc::Framer</a></code> component implements this protocol in order to interoperate with these other components. The action taken by this protocol is dependent on the number of framed messages (frames) sent to the communication adapter in response to each message received from <code><a class="el" href="class_svc_1_1_com_queue.html">Svc::ComQueue</a></code>.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Produced Frames   </th><th class="markdownTableHeadNone">Action   </th><th class="markdownTableHeadNone">Rationale    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Send one <code>Fw::Success::SUCCESS</code> status   </td><td class="markdownTableBodyNone">Data must continue to flow to produce a frame    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">Pass through received statuses   </td><td class="markdownTableBodyNone">Frame produced and communication adapter produces status   </td></tr>
</table>
<p>When a frame is produced the communication adapter is responsible for determining the status of the message and its statuses must be passed through. When no frame is produced, the communication adapter does not receive a frame and is incapable of producing a status. <code><a class="el" href="class_svc_1_1_framer.html" title="Generic framing component using FramingProtocol implementation for actual framing.">Svc::Framer</a></code> must act appropriately in this case.</p>
<blockquote class="doxtable">
<p>Note: <code><a class="el" href="class_svc_1_1_framer.html" title="Generic framing component using FramingProtocol implementation for actual framing.">Svc::Framer</a></code> must also pass through the initiation message from the communication adapter to start data flow. </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md30"></a>
Communication Adapter Protocol</h1>
<p>The communication adapter must obey a specific protocol to indicate to F´ application components the status of outgoing transmissions. This is done with the <code>comStatus</code> port. A communication status is one of two possibilities:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Status   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Fw::Success::SUCCESS   </td><td class="markdownTableBodyNone"><em>Communication adapter</em> transmission succeeded and is ready for more data.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Fw::Success::FAILURE   </td><td class="markdownTableBodyNone">Last transmission failed; <em>communication adapter</em> is unable to receive more data.   </td></tr>
</table>
<ul>
<li>Fw::Success::SUCCESS may also indicate a connection/reconnection success when data flow must be initiated.</li>
</ul>
<p>A <em>Communication Adapter</em> shall emit either Fw::Success::SUCCESS or Fw::Success::FAILURE via the <code>comStatus</code> port once for each call received on <code>comDataIn</code>. Additionally, a <em>Communication Adapter</em> shall emit Fw::Success::SUCCESS once at startup to indicate communication is initially ready and once after each Fw::Success::FAILURE event to indicate that communication has been restored. By emitting Fw::Success::SUCCESS after any failure, the communication adapter ensures that each received message eventually results in a Fw::Success::SUCCESS.</p>
<blockquote class="doxtable">
<p>It is imperative that <em>Communication Adapters</em> implement the <code>comStatus</code> protocol correctly. </p>
</blockquote>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
