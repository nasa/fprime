<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>F´ Flight Software - C/C++ Documentation: Svc::RateGroupDriver Component</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">F´ Flight Software - C/C++ Documentation
   &#160;<span id="projectnumber">Latest</span>
   </div>
   <div id="projectbrief">A framework for building embedded system applications to NASA flight quality standards.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_svc_rate_group_driver_component.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="class_svc_1_1_rate_group_driver.html" title="Implementation class for RateGroupDriver.">Svc::RateGroupDriver</a> Component </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md613"></a>
Svc::RateGroupDriver Component</h1>
<h2><a class="anchor" id="autotoc_md614"></a>
1. Introduction</h2>
<p>The RateGroupDriver Component is used to take a single system tick and distribute it to multiple rate groups in a system. It takes the input <code>Svc::Sched</code> port, then divides down the tick rate based on arguments to the constructor. Typically, the output ports would be connected to the asynchronous inputs of an <code>ActiveRateGroup</code>.</p>
<h2><a class="anchor" id="autotoc_md615"></a>
2. Requirements</h2>
<p>The requirements for RateGroupDriver are as follows:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Requirement   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Verification Method    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">RGD-001   </td><td class="markdownTableBodyNone">The '<a class="el" href="class_svc_1_1_rate_group_driver.html" title="Implementation class for RateGroupDriver.">Svc::RateGroupDriver</a>' component shall divide a primary system tick into the needed rate groups   </td><td class="markdownTableBodyNone">Unit Test    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">RCD-002   </td><td class="markdownTableBodyNone">The '<a class="el" href="class_svc_1_1_rate_group_driver.html" title="Implementation class for RateGroupDriver.">Svc::RateGroupDriver</a>' component shall be able to run in ISR context   </td><td class="markdownTableBodyNone">Inspection   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md616"></a>
3. Design</h2>
<h3><a class="anchor" id="autotoc_md617"></a>
3.1 Context</h3>
<h4><a class="anchor" id="autotoc_md618"></a>
3.1.1 Component Diagram</h4>
<p>The <a class="el" href="class_svc_1_1_rate_group_driver.html" title="Implementation class for RateGroupDriver.">Svc::RateGroupDriver</a> component has the following component diagram:</p>
<p><img src="img/RateGroupDriverBDD.jpg" alt="RateGroupDriver Diagram" title="RateGroupDriver" class="inline"/></p>
<h4><a class="anchor" id="autotoc_md619"></a>
3.1.2 Ports</h4>
<p>The <a class="el" href="class_svc_1_1_rate_group_driver.html" title="Implementation class for RateGroupDriver.">Svc::RateGroupDriver</a> component uses the following port types:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Port Data Type   </th><th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Direction   </th><th class="markdownTableHeadNone">Kind   </th><th class="markdownTableHeadNone">Usage    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="../Sched/docs/sdd.html"><code>Svc::Cycle</code></a>   </td><td class="markdownTableBodyNone">CycleIn   </td><td class="markdownTableBodyNone">Input   </td><td class="markdownTableBodyNone">Synchronous   </td><td class="markdownTableBodyNone">Receive the system tick    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="../Sched/docs/sdd.html"><code>Svc::Cycle</code></a>   </td><td class="markdownTableBodyNone">CycleOut   </td><td class="markdownTableBodyNone">Output   </td><td class="markdownTableBodyNone">n/a   </td><td class="markdownTableBodyNone">Used to drive rate groups   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md620"></a>
3.2 Functional Description</h4>
<p>The <a class="el" href="class_svc_1_1_rate_group_driver.html" title="Implementation class for RateGroupDriver.">Svc::RateGroupDriver</a> component has one input port that receives a system tick.</p>
<p>The <code>configure()</code> function is passed an array of integer arguments that specifies the divisors for each output port. This should be called after the constructor but before any port calls are made. The contents of the array are copied during the call, so the array can be a temporary variable.</p>
<div class="fragment"><div class="line">RateGroupDriverImpl::configure(NATIVE_INT_TYPE dividers[], NATIVE_INT_TYPE numDividers);</div>
</div><!-- fragment --><p>The input rate for each output port will be divided down by the value in the <code>dividers[]</code> array corresponding to the output port number.</p>
<p>The implementation will be ISR compliant by avoiding the following:</p>
<ul>
<li>Floating point calculations</li>
<li>Taking mutexes</li>
<li>Calling libraries with unknown side effects</li>
<li>Long implementation</li>
</ul>
<p>For instance,</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"><code>SchedIn</code> Rate   </th><th class="markdownTableHeadNone"><code>divider[0]</code>   </th><th class="markdownTableHeadNone"><code>SchedOut[0]</code>   </th><th class="markdownTableHeadNone"><code>divider[1]</code>   </th><th class="markdownTableHeadNone"><code>SchedOut[1]</code>   </th><th class="markdownTableHeadNone"><code>divider[2]</code>   </th><th class="markdownTableHeadNone"><code>SchedOut[2]</code>    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1Hz   </td><td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">1Hz   </td><td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">0.5Hz   </td><td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">0.25Hz   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md621"></a>
3.3 Scenarios</h3>
<h4><a class="anchor" id="autotoc_md622"></a>
3.3.1 System Tick Port Call</h4>
<p>As described in the Functional Description section, the RateGroupDriver component accepts calls to the SchedIn and divides them down to the SchedOut ports:</p>
<p><img src="img/RateGroupDriverPortCallSequence.jpg" alt="System Tick Port Call" class="inline"/></p>
<h3><a class="anchor" id="autotoc_md623"></a>
3.4 State</h3>
<p>RateGroupDriver has no state machines.</p>
<h3><a class="anchor" id="autotoc_md624"></a>
3.5 Algorithms</h3>
<p>RateGroupDriver has no significant algorithms.</p>
<h2><a class="anchor" id="autotoc_md625"></a>
4. Dictionary</h2>
<p>No dictionary for this module</p>
<h2><a class="anchor" id="autotoc_md626"></a>
5. Module Checklists</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Document   </th><th class="markdownTableHeadNone">Link    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Design Checklist   </td><td class="markdownTableBodyNone"><a href="Checklist_Design.xlsx">Link</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Code Review Checklist   </td><td class="markdownTableBodyNone"><a href="Checklist_Code.xlsx">Link</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Unit Test Checklist   </td><td class="markdownTableBodyNone"><a href="Checklist_Unit_Test.xlsx">Link</a>   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md627"></a>
6. Unit Testing</h2>
<p>To see unit test coverage run fprime-util check &ndash;coverage</p>
<h2><a class="anchor" id="autotoc_md628"></a>
7. Change Log</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Date   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">6/19/2015   </td><td class="markdownTableBodyNone">Design review edits    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">7/22/2015   </td><td class="markdownTableBodyNone">Design review actions    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">9/2/2015   </td><td class="markdownTableBodyNone">Unit test updates   </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="svc.html">Svc Components, Ports, and Classes</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
