<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>F´ Flight Software - C/C++ Documentation: Svc::PrmDb Component</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">F´ Flight Software - C/C++ Documentation
   &#160;<span id="projectnumber">Latest</span>
   </div>
   <div id="projectbrief">A framework for building embedded system applications to NASA flight quality standards.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_svc_prm_db_component.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="namespace_svc.html#ac4fe15c5a44df4ac62d4ceb2fcf6fa3e">Svc::PrmDb</a> Component </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md595"></a>
Svc::PrmDb Component</h1>
<h2><a class="anchor" id="autotoc_md596"></a>
1. Introduction</h2>
<p>The <code><a class="el" href="namespace_svc.html#ac4fe15c5a44df4ac62d4ceb2fcf6fa3e">Svc::PrmDb</a></code> Component is used to store parameter values used by other components. The values are stored in serialized form. During initialization, <code><a class="el" href="namespace_svc.html#ac4fe15c5a44df4ac62d4ceb2fcf6fa3e">Svc::PrmDb</a></code> loads a set of parameters from a file, and stores the values in a table based on the parameter ID. Components that need parameters request their values during initialization after they have been loaded. Components occasionally receive updates to parameter values via a command, and the new values will be sent to <code><a class="el" href="namespace_svc.html#ac4fe15c5a44df4ac62d4ceb2fcf6fa3e">Svc::PrmDb</a></code>. A command will save the copy in memory back to the file.</p>
<h2><a class="anchor" id="autotoc_md597"></a>
2. Requirements</h2>
<p>The requirements for <code><a class="el" href="namespace_svc.html#afbbcedb62d0533e2557fdde783b06acf">Svc::TlmChan</a></code> are as follows:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Requirement   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Verification Method    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PRMDB-001   </td><td class="markdownTableBodyNone">The <code><a class="el" href="namespace_svc.html#ac4fe15c5a44df4ac62d4ceb2fcf6fa3e">Svc::PrmDb</a></code> component shall load parameter values from a file   </td><td class="markdownTableBodyNone">Unit Test    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PRMDB-002   </td><td class="markdownTableBodyNone">The <code><a class="el" href="namespace_svc.html#ac4fe15c5a44df4ac62d4ceb2fcf6fa3e">Svc::PrmDb</a></code> component shall provide an interface to read parameter values   </td><td class="markdownTableBodyNone">Inspection, Unit Test    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PRMDB-003   </td><td class="markdownTableBodyNone">The <code><a class="el" href="namespace_svc.html#ac4fe15c5a44df4ac62d4ceb2fcf6fa3e">Svc::PrmDb</a></code> component shall provide an interface to update parameter values   </td><td class="markdownTableBodyNone">Inspection, Unit Test    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PRMDB-004   </td><td class="markdownTableBodyNone">The <code><a class="el" href="namespace_svc.html#ac4fe15c5a44df4ac62d4ceb2fcf6fa3e">Svc::PrmDb</a></code> component shall provide a command to save the current parameter values   </td><td class="markdownTableBodyNone">Inspection, Unit Test   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md598"></a>
3. Design</h2>
<h3><a class="anchor" id="autotoc_md599"></a>
3.1 Context</h3>
<h4><a class="anchor" id="autotoc_md600"></a>
3.1.1 Component Diagram</h4>
<p>The <code><a class="el" href="namespace_svc.html#ac4fe15c5a44df4ac62d4ceb2fcf6fa3e">Svc::PrmDb</a></code> component has the following component diagram:</p>
<p><img src="img/PrmDbBDD.jpg" alt="Svc::PrmDb Diagram" title="Svc::TlmChan" class="inline"/></p>
<h4><a class="anchor" id="autotoc_md601"></a>
3.1.2 Ports</h4>
<p>The <code><a class="el" href="namespace_svc.html#ac4fe15c5a44df4ac62d4ceb2fcf6fa3e">Svc::PrmDb</a></code> component uses the following port types:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Port   </th><th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Direction   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Usage    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="../../../Fw/Prm/docs/sdd.html"><code>Fw::PrmGet</code></a>   </td><td class="markdownTableBodyNone">getPrm   </td><td class="markdownTableBodyNone">Input   </td><td class="markdownTableBodyNone">Synchronous   </td><td class="markdownTableBodyNone">Get a parameter    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="../../../Fw/Prm/docs/sdd.html"><code>Fw::PrmSet</code></a>   </td><td class="markdownTableBodyNone">setPrm   </td><td class="markdownTableBodyNone">Input   </td><td class="markdownTableBodyNone">Asynchronous   </td><td class="markdownTableBodyNone">Update a parameter   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md602"></a>
3.2 Functional Description</h4>
<p>The <code><a class="el" href="namespace_svc.html#ac4fe15c5a44df4ac62d4ceb2fcf6fa3e">Svc::PrmDb</a></code> component stores parameter values in a table by parameter ID. The table is mutex protected to prevent reading and writing from occurring at the same time. When the parameter file is read, the ID and serialized value are extracted and placed in the table. If an error occurs during the file load, any entries not successfully loaded will return a status to the <code>getPrm</code> port of <code>PARAM_INVALID</code> will be returned, otherwise <code>PARAM_OK</code>.</p>
<p>When a new parameter value is written to the <code>setPrm</code> port, the table in memory is updated, and the flag indicating a valid value is set.</p>
<p>When the component receives the <code>PRM_SAVE_FILE</code> command, it saves the entire table to the file, overwriting the old values. Unless the file is written, any parameter updates will be lost when the software is restarted.</p>
<p>The fields for each parameter value as stored in the parameter file are as follows:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Size (in bytes)   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Entry Delimiter   </td><td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">0xA5    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Record Size   </td><td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">Id type size + number of bytes in parameter value    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Parameter ID   </td><td class="markdownTableBodyNone">Size of FwPrmIdType   </td><td class="markdownTableBodyNone">Value of parameter ID    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Parameter value   </td><td class="markdownTableBodyNone">number of bytes in parameter   </td><td class="markdownTableBodyNone">serialized bytes of value   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md603"></a>
3.3 Scenarios</h3>
<h4><a class="anchor" id="autotoc_md604"></a>
3.3.1 Parameter Load Scenario</h4>
<p>This diagram shows the scenario where parameters are loaded from a file.</p>
<p><img src="img/ParameterLoadScenario.jpg" alt="External User Scenario" class="inline"/></p>
<h4><a class="anchor" id="autotoc_md605"></a>
3.3.2 Parameter Get/Set Scenario</h4>
<p>This diagram shows the scenario where parameters are retrieved and updated by components.</p>
<p><img src="img/ParameterGetSetScenario.jpg" alt="External User Scenario" class="inline"/></p>
<h4><a class="anchor" id="autotoc_md606"></a>
3.3.3 Parameter Save Scenario</h4>
<p>This diagram shows the scenario where parameters are saved to a file.</p>
<p><img src="img/ParameterSaveScenario.jpg" alt="External User Scenario" class="inline"/></p>
<h3><a class="anchor" id="autotoc_md607"></a>
3.4 State</h3>
<p><code><a class="el" href="namespace_svc.html#ac4fe15c5a44df4ac62d4ceb2fcf6fa3e">Svc::PrmDb</a></code> has no state machines.</p>
<h3><a class="anchor" id="autotoc_md608"></a>
3.5 Algorithms</h3>
<p><code><a class="el" href="namespace_svc.html#ac4fe15c5a44df4ac62d4ceb2fcf6fa3e">Svc::PrmDb</a></code> has no significant algorithms.</p>
<h2><a class="anchor" id="autotoc_md609"></a>
4. Module Checklists</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Document   </th><th class="markdownTableHeadNone">Link    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Design Checklist   </td><td class="markdownTableBodyNone"><a href="Checklist_Design.xlsx">Link</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Code Checklist   </td><td class="markdownTableBodyNone"><a href="Checklist_Code.xlsx">Link</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Unit Test Checklist   </td><td class="markdownTableBodyNone"><a href="Checklist_Unit_Test.xlsx">Link</a>   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md610"></a>
5. Dictionary</h2>
<p>TBD</p>
<h2><a class="anchor" id="autotoc_md611"></a>
6. Unit Testing</h2>
<p>To see unit test coverage run fprime-util check &ndash;coverage</p>
<h2><a class="anchor" id="autotoc_md612"></a>
7. Change Log</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Date   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">7/15/2015   </td><td class="markdownTableBodyNone">Design review edits    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">10/6/2015   </td><td class="markdownTableBodyNone">Unit test review edits   </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="svc.html">Svc Components, Ports, and Classes</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
