<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>F´ Flight Software - C/C++ Documentation: Framework Support for Data Products</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">F´ Flight Software - C/C++ Documentation
   &#160;<span id="projectnumber">devel</span>
   </div>
   <div id="projectbrief">A framework for building embedded system applications to NASA flight quality standards.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_fw_dp.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Framework Support for Data Products </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md465"></a>
Framework Support for Data Products</h1>
<h2><a class="anchor" id="autotoc_md466"></a>
1. Introduction</h2>
<p>This build module defines FPP ports and C++ classes that support the collection and storage of data products. For more information on data products and records, see the <a class="el" href="md_docs__design_data_products.html">data products documentation</a>.</p>
<h2><a class="anchor" id="autotoc_md467"></a>
2. Configuration</h2>
<p>The following types and constants are configurable via the file <a href="../../../config/DpCfg.fpp"><code>config/DpCfg.fpp</code></a>:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Kind   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="class_fw_1_1_dp_cfg_1_1_proc_type.html">Fw::DpCfg::ProcType</a></code>   </td><td class="markdownTableBodyNone">Type   </td><td class="markdownTableBodyNone">The enumeration type that defines the bit mask for selecting a type of processing. The processing is applied to a container before writing it to disk.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="namespace_fw_1_1_dp_cfg.html#a9ea816f1c2196b8ded72c6b2a709b40ba265dc0a37c075f1af68057c21e58a091">Fw::DpCfg::CONTAINER_USER_DATA_SIZE</a></code>   </td><td class="markdownTableBodyNone">Constant   </td><td class="markdownTableBodyNone">The size of the user-configurable data in the container packet header.   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md468"></a>
3. FPP Types</h2>
<p>This build module defines the following FPP types:</p>
<ol type="1">
<li><code>DpState</code>: An enumeration describing the state of a data product.</li>
</ol>
<h2><a class="anchor" id="autotoc_md469"></a>
4. FPP Ports</h2>
<p>This build module defines the following FPP ports:</p>
<ol type="1">
<li><code>DpGet</code>: A port for synchronously getting a buffer to back a data product container.</li>
</ol>
<ol type="1">
<li><code>DpRequest</code>: A port for sending a request for a buffer to back a data product container.</li>
</ol>
<ol type="1">
<li><code>DpResponse</code>: A port for receiving a response to a buffer request.</li>
</ol>
<ol type="1">
<li><code>DpSend</code>: A port for sending a buffer holding data products.</li>
</ol>
<p>For more information, see the file <a href="../Dp.fpp"><code>Dp.fpp</code></a> in the parent directory.</p>
<h2><a class="anchor" id="autotoc_md470"></a>
5. C++ Classes</h2>
<p>This module defines a C++ class <code>DpContainer</code>. <code>DpContainer</code> is the base class for a data product container. When you specify a container <em>C</em> in an FPP component model, the auto-generated C++ for the component defines a container class for <em>C</em>. The container class is derived from <code>DpContainer</code>. It provides all the generic operations defined in <code>DpContainer</code> plus the operations that are specific to <em>C</em>, for example serializing the specific types of data that <em>C</em> can store.</p>
<p><a class="anchor" id="serial-format"></a> </p>
<h3><a class="anchor" id="autotoc_md471"></a>
5.1. Serialized Container Format</h3>
<p>In serialized form, each data product container consists of the following elements: a header, a header hash, data, and a data hash.</p>
<h4><a class="anchor" id="autotoc_md472"></a>
5.1.1. Header</h4>
<p>The data product header has the following format.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Field Name   </th><th class="markdownTableHeadNone">Data Type   </th><th class="markdownTableHeadNone">Serialized Size   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>PacketDescriptor</code>   </td><td class="markdownTableBodyNone"><code>FwPacketDescriptorType</code>   </td><td class="markdownTableBodyNone"><code>sizeof(FwPacketDescriptorType)</code>   </td><td class="markdownTableBodyNone">The F Prime packet descriptor <a href="../../../Fw/Com/ComPacket.hpp"><code>FW_PACKET_DP</code></a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>Id</code>   </td><td class="markdownTableBodyNone"><code>FwDpIdType</code>   </td><td class="markdownTableBodyNone"><code>sizeof(FwDpIdType)</code>   </td><td class="markdownTableBodyNone">The container ID. This is a system-global ID (component-local ID + component base ID)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Priority</code>   </td><td class="markdownTableBodyNone"><code>FwDpPriorityType</code>   </td><td class="markdownTableBodyNone"><code>sizeof(FwDpPriorityType)</code>   </td><td class="markdownTableBodyNone">The container priority    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>TimeTag</code>   </td><td class="markdownTableBodyNone"><code><a class="el" href="class_fw_1_1_time.html">Fw::Time</a></code>   </td><td class="markdownTableBodyNone"><code><a class="el" href="class_fw_1_1_time.html#a86c57826556da0bf69ac5fe194dbb436a0d5ec7f4184b1b686424b7aabe8e30e8">Fw::Time::SERIALIZED_SIZE</a></code>   </td><td class="markdownTableBodyNone">The time tag associated with the container    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>ProcTypes</code>   </td><td class="markdownTableBodyNone"><code><a class="el" href="class_fw_1_1_dp_cfg_1_1_proc_type.html#a88265a29a75441a1e9ecf3c6229b3d9c" title="The serial representation type.">Fw::DpCfg::ProcType::SerialType</a></code>   </td><td class="markdownTableBodyNone"><code>sizeof(Fw::DpCfg::ProcType::SerialType)</code>   </td><td class="markdownTableBodyNone">The processing types, represented as a bit mask    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>UserData</code>   </td><td class="markdownTableBodyNone"><code>Header::UserData</code>   </td><td class="markdownTableBodyNone"><code>DpCfg::CONTAINER_USER_DATA_SIZE</code>   </td><td class="markdownTableBodyNone">User-configurable data    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>DpState</code>   </td><td class="markdownTableBodyNone"><code>DpState</code>   </td><td class="markdownTableBodyNone"><code>DpState::SERIALIZED_SIZE</code>   </td><td class="markdownTableBodyNone">The data product state    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>DataSize</code>   </td><td class="markdownTableBodyNone"><code>FwSizeType</code>   </td><td class="markdownTableBodyNone"><code>sizeof(FwSizeStoreType)</code>   </td><td class="markdownTableBodyNone">The size of the data payload in bytes   </td></tr>
</table>
<p><code>Header::UserData</code> is an array of <code>U8</code> of size <code><a class="el" href="namespace_fw_1_1_dp_cfg.html#a9ea816f1c2196b8ded72c6b2a709b40ba265dc0a37c075f1af68057c21e58a091">Fw::DpCfg::CONTAINER_USER_DATA_SIZE</a></code>.</p>
<h4><a class="anchor" id="autotoc_md473"></a>
5.1.2. Header Hash</h4>
<p>The header hash has the following format.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Field Name   </th><th class="markdownTableHeadNone">Serialized Size   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Header Hash</code>   </td><td class="markdownTableBodyNone"><a class="el" href="utils_2_hash_2_r_e_a_d_m_e_8md.html">`HASH_DIGEST_LENGTH`</a>   </td><td class="markdownTableBodyNone">The hash value guarding the header.   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md474"></a>
5.1.3. Data</h4>
<p>The data is a sequence of records. The serialized format of each record <em>R</em> depends on whether <em>R</em> is a single-value record or an array record.</p>
<p><b>Single-value records:</b> A single-value record is specified in FPP in the form <code>product record</code> <em>name</em> <code>:</code> <em>type</em>. The record has name <em>name</em> and represents one item of data of type <em>type</em>. The type may be any FPP type, including a struct or array type. Single-value records with <em>type = T</em> have the following format:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Field Name   </th><th class="markdownTableHeadNone">Data Type   </th><th class="markdownTableHeadNone">Serialized Size   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Id</code>   </td><td class="markdownTableBodyNone"><code>FwDpIdType</code>   </td><td class="markdownTableBodyNone"><code>sizeof(FwDpIdType)</code>   </td><td class="markdownTableBodyNone">The record ID    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>Data</code>   </td><td class="markdownTableBodyNone"><em>T</em>   </td><td class="markdownTableBodyNone"><code>sizeof(</code>_T_<code>)</code> if <em>T</em> is a primitive type; otherwise <em>T</em><code>::SERIALIZED_SIZE</code>   </td><td class="markdownTableBodyNone">The serialized data   </td></tr>
</table>
<p><b>Array records:</b> An array record is specified in FPP in the form <code>product record</code> <em>name</em> <code>:</code> <em>type</em> <code>array</code>. The record has name <em>name</em> and represents an array of items of type <em>type</em>. The type may be any FPP type, including a struct or array type. Array records with <em>type = T</em> have the following format:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Field Name   </th><th class="markdownTableHeadNone">Data Type   </th><th class="markdownTableHeadNone">Serialized Size   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Id</code>   </td><td class="markdownTableBodyNone"><code>FwDpIdType</code>   </td><td class="markdownTableBodyNone"><code>sizeof(FwDpIdType)</code>   </td><td class="markdownTableBodyNone">The record ID    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>Size</code>   </td><td class="markdownTableBodyNone"><code>FwSizeType</code>   </td><td class="markdownTableBodyNone"><code>sizeof(FwSizeStoreType)</code>   </td><td class="markdownTableBodyNone">The number <em>n</em> of elements in the record    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Data</code>   </td><td class="markdownTableBodyNone">Array of <em>n</em> <em>T</em>   </td><td class="markdownTableBodyNone"><em>n</em> * [<code>sizeof(</code>_T_<code>)</code> if <em>T</em> is a primitive type; otherwise <em>T</em><code>::SERIALIZED_SIZE</code>]   </td><td class="markdownTableBodyNone"><em>n</em> elements, each of type <em>T</em>   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md475"></a>
5.1.4. Data Hash</h4>
<p>The data hash has the following format.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Field Name   </th><th class="markdownTableHeadNone">Serialized Size   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Data Hash</code>   </td><td class="markdownTableBodyNone"><a class="el" href="utils_2_hash_2_r_e_a_d_m_e_8md.html">`HASH_DIGEST_LENGTH`</a>   </td><td class="markdownTableBodyNone">The hash value guarding the data.   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md476"></a>
5.2. Further Information</h3>
<p>For more information on the <code>DpContainer</code> class, see the file <a href="../DpContainer.hpp"><code>DpContainer.hpp</code></a> in the parent directory. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
