<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>F´ Flight Software - C/C++ Documentation: Svc::Framer Component</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">F´ Flight Software - C/C++ Documentation
   &#160;<span id="projectnumber">Latest</span>
   </div>
   <div id="projectbrief">A framework for building embedded system applications to NASA flight quality standards.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_svc_framer_component.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="class_svc_1_1_framer.html" title="Generic framing component using FramingProtocol implementation for actual framing.">Svc::Framer</a> Component </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md466"></a>
Svc::Framer (Passive Component)</h1>
<h2><a class="anchor" id="autotoc_md467"></a>
1. Introduction</h2>
<p><code><a class="el" href="class_svc_1_1_framer.html" title="Generic framing component using FramingProtocol implementation for actual framing.">Svc::Framer</a></code> is a passive component. It is part of the standard path for F Prime data downlink. It accepts data packets from service layer components, for example instances of <a class="el" href="svc_2_tlm_chan_2docs_2sdd_8md.html">`Svc::TlmChan`</a>, <a class="el" href="svc_2_active_logger_2docs_2sdd_8md.html">`Svc::ActiveLogger`</a>, or <a class="el" href="svc_2_file_downlink_2docs_2sdd_8md.html">`Svc::FileDownlink`</a>. For each packet <em>P</em> received, it wraps <em>P</em> in a frame <em>F</em> and sends <em>F</em> to a byte stream driver that downlinks frames, for example, <a class="el" href="drv_2_tcp_client_2docs_2sdd_8md.html">`Drv::TcpClient`</a>.</p>
<p>When instantiating <code>Framer</code>, you must provide an implementation of <a class="el" href="svc_2_framing_protocol_2docs_2sdd_8md.html">`Svc::FramingProtocol`</a>. This implementation specifies exactly what is in each frame; typically it is a frame header, a data packet, and a hash value. You can use the standard F Prime downlink protocol implementation. This implementation works with the F Prime ground data system (GDS).</p>
<p><code><a class="el" href="class_svc_1_1_framer.html" title="Generic framing component using FramingProtocol implementation for actual framing.">Svc::Framer</a></code> is designed to act alongside instances of the <a href="https://nasa.github.io/fprime/Design/communication-adapter-interface.html">communication adapter interface</a>. In order to work well with communication adapters, <code><a class="el" href="class_svc_1_1_framer.html" title="Generic framing component using FramingProtocol implementation for actual framing.">Svc::Framer</a></code> implements the framer status <a href="https://nasa.github.io/fprime/Design/communication-adapter-interface.html#framer-status-protocol">protocol</a>.</p>
<h2><a class="anchor" id="autotoc_md468"></a>
2. Assumptions</h2>
<ol type="1">
<li>For any deployment <em>D</em> that uses an instance <em>I</em> of <code>Framer</code>, the framing protocol used with <em>I</em> matches the downlink protocol of any ground system that receives frames from <em>I</em>.</li>
</ol>
<h2><a class="anchor" id="autotoc_md469"></a>
3. Requirements</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Requirement   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Rationale   </th><th class="markdownTableHeadNone">Verification Method    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">SVC-FRAMER-001   </td><td class="markdownTableBodyNone"><code><a class="el" href="class_svc_1_1_framer.html" title="Generic framing component using FramingProtocol implementation for actual framing.">Svc::Framer</a></code> shall accept data packets of any type stored in <code>Fw::Com</code> buffers.   </td><td class="markdownTableBodyNone"><code><a class="el" href="namespace_svc.html#ac0e00075604e6b204b18163442910ec1">Svc::ActiveLogger</a></code> and <code>Svc::ChanTlm</code> emit packets as <code>Fw::Com</code> buffers.   </td><td class="markdownTableBodyNone">Unit test    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">SVC-FRAMER-002   </td><td class="markdownTableBodyNone"><code><a class="el" href="class_svc_1_1_framer.html" title="Generic framing component using FramingProtocol implementation for actual framing.">Svc::Framer</a></code> shall accept file packets stored in <code><a class="el" href="class_fw_1_1_buffer.html">Fw::Buffer</a></code> objects.   </td><td class="markdownTableBodyNone"><code><a class="el" href="class_svc_1_1_file_downlink.html">Svc::FileDownlink</a></code> emits packets as <code><a class="el" href="class_fw_1_1_buffer.html">Fw::Buffer</a></code> objects.   </td><td class="markdownTableBodyNone">Unit test    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">SVC-FRAMER-003   </td><td class="markdownTableBodyNone"><code><a class="el" href="class_svc_1_1_framer.html" title="Generic framing component using FramingProtocol implementation for actual framing.">Svc::Framer</a></code> shall use an instance of <code><a class="el" href="class_svc_1_1_framing_protocol.html" title="abstract class representing a framing protocol">Svc::FramingProtocol</a></code>, supplied when the component is instantiated, to wrap packets in frames.   </td><td class="markdownTableBodyNone">The purpose of <code><a class="el" href="class_svc_1_1_framer.html" title="Generic framing component using FramingProtocol implementation for actual framing.">Svc::Framer</a></code> is to frame data packets. Using the <code><a class="el" href="class_svc_1_1_framing_protocol.html" title="abstract class representing a framing protocol">Svc::FramingProtocol</a></code> interface allows the same Framer component to operate with different protocols.   </td><td class="markdownTableBodyNone">Unit test    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">SVC-FRAMER-004   </td><td class="markdownTableBodyNone"><code><a class="el" href="class_svc_1_1_framer.html" title="Generic framing component using FramingProtocol implementation for actual framing.">Svc::Framer</a></code> shall emit a status of <code>Fw::Success::SUCCESS</code> when no framed packets were sent in response to incoming buffer.   </td><td class="markdownTableBodyNone"><code><a class="el" href="class_svc_1_1_framer.html" title="Generic framing component using FramingProtocol implementation for actual framing.">Svc::Framer</a></code> implements the framer status protocol.   </td><td class="markdownTableBodyNone">Unit Test    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">SVC-FRAMER-005   </td><td class="markdownTableBodyNone"><code><a class="el" href="class_svc_1_1_framer.html" title="Generic framing component using FramingProtocol implementation for actual framing.">Svc::Framer</a></code> shall forward <code>Fw::Success</code> status messages received   </td><td class="markdownTableBodyNone"><code><a class="el" href="class_svc_1_1_framer.html" title="Generic framing component using FramingProtocol implementation for actual framing.">Svc::Framer</a></code> implements the framer status protocol.   </td><td class="markdownTableBodyNone">Unit Test   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md470"></a>
4. Design</h2>
<h3><a class="anchor" id="autotoc_md471"></a>
4.1. Component Diagram</h3>
<p>The diagram below shows the <code>Framer</code> component.</p>
<p><img src="./img/Framer.png" alt="Framer Component" class="inline"/></p>
<h3><a class="anchor" id="autotoc_md472"></a>
4.2. Ports</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Kind   </th><th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Port Type   </th><th class="markdownTableHeadNone">Usage    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>guarded input</code>   </td><td class="markdownTableBodyNone"><code>comIn</code>   </td><td class="markdownTableBodyNone"><code>Fw.Com</code>   </td><td class="markdownTableBodyNone">Port for receiving data packets of any type stored in statically-sized Fw::Com buffers    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>guarded input</code>   </td><td class="markdownTableBodyNone"><code>bufferIn</code>   </td><td class="markdownTableBodyNone"><code>Fw.BufferSend</code>   </td><td class="markdownTableBodyNone">Port for receiving file packets stored in dynamically-sized <a class="el" href="class_fw_1_1_buffer.html">Fw::Buffer</a> objects    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>guarded input</code>   </td><td class="markdownTableBodyNone"><code>comStatusIn</code>   </td><td class="markdownTableBodyNone"><code>Fw.SuccessCondition</code>   </td><td class="markdownTableBodyNone">Port for receiving status of last send for implementing communication adapter interface protocol    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>output</code>   </td><td class="markdownTableBodyNone"><code>bufferDeallocate</code>   </td><td class="markdownTableBodyNone"><code>Fw.BufferSend</code>   </td><td class="markdownTableBodyNone">Port for deallocating buffers received on bufferIn, after copying packet data to the frame buffer    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>output</code>   </td><td class="markdownTableBodyNone"><code>framedAllocate</code>   </td><td class="markdownTableBodyNone"><code>Fw.BufferGet</code>   </td><td class="markdownTableBodyNone">Port for allocating buffers to hold framed data    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>output</code>   </td><td class="markdownTableBodyNone"><code>framedOut</code>   </td><td class="markdownTableBodyNone"><code>Drv.ByteStreamSend</code>   </td><td class="markdownTableBodyNone">Port for sending buffers containing framed data. Ownership of the buffer passes to the receiver.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>output</code>   </td><td class="markdownTableBodyNone"><code>comStatusOut</code>   </td><td class="markdownTableBodyNone"><code>Fw.SuccessCondition</code>   </td><td class="markdownTableBodyNone">Port for sending communication adapter interface protocol status messages   </td></tr>
</table>
<p><a class="anchor" id="derived-classes"></a> </p>
<h3><a class="anchor" id="autotoc_md473"></a>
4.3. Derived Classes</h3>
<p><code>Framer</code> is derived from <code>FramerComponentBase</code> as usual. It is also derived (via C++ multiple inheritance) from <a class="el" href="svc_2_framing_protocol_2docs_2sdd_8md.html">`Svc::FramingProtocolInterface`</a>. The multiple inheritance makes the <code>Framer</code> instance into the instance of <code><a class="el" href="class_svc_1_1_framing_protocol_interface.html" title="interface supplied to the framing protocol">Svc::FramingProtocolInterface</a></code> that is required to use <code><a class="el" href="class_svc_1_1_framing_protocol.html" title="abstract class representing a framing protocol">Svc::FramingProtocol</a></code>. See <a href="#fpi-impl">below</a> for a description of how <code>Framer</code> implements <code>FramingProtocolInterface</code>.</p>
<p>Here is a class diagram for <code>Framer</code>:</p>
<div class="fragment"><div class="line">classDiagram</div>
<div class="line">    ObjBase &lt;|-- PassiveComponentBase</div>
<div class="line">    PassiveComponentBase &lt;|-- FramerComponentBase</div>
<div class="line">    FramerComponentBase &lt;|-- Framer</div>
<div class="line">    FramingProtocolInterface &lt;|-- Framer</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md474"></a>
4.4. State</h3>
<p><code>Framer</code> maintains the following state:</p>
<ol type="1">
<li><code>m_protocol</code>: A pointer to the implementation of <code>FramingProtocol</code> used for framing.</li>
</ol>
<h3><a class="anchor" id="autotoc_md475"></a>
4.5. Header File Configuration</h3>
<p>None.</p>
<p><a class="anchor" id="runtime-setup"></a> </p>
<h3><a class="anchor" id="autotoc_md476"></a>
4.6. Runtime Setup</h3>
<p>To set up an instance of <code>Framer</code>, you do the following:</p>
<ol type="1">
<li>Call the constructor and the <code>init</code> method in the usual way for an F Prime passive component.</li>
</ol>
<ol type="1">
<li>Call the <code>setup</code> method, passing in an instance <em>P</em> of <code><a class="el" href="class_svc_1_1_framing_protocol.html" title="abstract class representing a framing protocol">Svc::FramingProtocol</a></code>. The <code>setup</code> method does the following:<ol type="a">
<li>Store a pointer to <em>P</em> in <code>m_protocol</code>.</li>
</ol>
<ol type="a">
<li>Pass <code>*this</code> into the setup method for <em>P</em>. As noted <a href="#derived-classes">above</a>, <code>*this</code> is the instance of <code><a class="el" href="class_svc_1_1_framing_protocol_interface.html" title="interface supplied to the framing protocol">Svc::FramingProtocolInterface</a></code> used by <em>P</em>.</li>
</ol>
</li>
</ol>
<p>For an example of setting up a <code>Framer</code> instance, see the <code>downlink</code> instance in <a href="../../../Ref/Top/instances.fpp"><code>Ref/Top/instances.fpp</code></a>.</p>
<h3><a class="anchor" id="autotoc_md477"></a>
4.7. Port Handlers</h3>
<h4><a class="anchor" id="autotoc_md478"></a>
4.7.1. comIn</h4>
<p>The <code>comIn</code> port handler receive a reference to an <code>Fw::Com</code> buffer <em>B</em> and an integer context value. It calls the <code>frame</code> method of <code>m_protocol</code>, passing in the address and length of <em>B</em> and the packet type <code><a class="el" href="class_fw_1_1_com_packet.html#a715f7261d313574f50a43b12914db425a89bc97f02f96b31614df715ff6e36eb0">Fw::ComPacket::FW_PACKET_UNKNOWN</a></code>.</p>
<h4><a class="anchor" id="autotoc_md479"></a>
4.7.2. bufferIn</h4>
<p>The <code>bufferIn</code> port handler receives a reference to an <code><a class="el" href="class_fw_1_1_buffer.html">Fw::Buffer</a></code> object <em>B</em>. It calls the <code>frame</code> method of <code>m_protocol</code>, passing in the data address and size of <em>B</em> and the packet type <code><a class="el" href="class_fw_1_1_com_packet.html#a715f7261d313574f50a43b12914db425a2af3697dc87c65b5561ac143e7197189">Fw::ComPacket::FW_PACKET_FILE</a></code>.</p>
<h4><a class="anchor" id="autotoc_md480"></a>
4.7.2. comStatusIn</h4>
<p>The <code>comStatusIn</code> port handler receives com status messages and forwards them out <code>comStatusOut</code>.</p>
<p><a class="anchor" id="fpi-impl"></a> </p>
<h3><a class="anchor" id="autotoc_md481"></a>
4.8. Implementation of Svc::FramingProtocolInterface</h3>
<p><a class="anchor" id="allocate"></a> </p>
<h4><a class="anchor" id="autotoc_md482"></a>
4.8.1. allocate</h4>
<p>The implementation of <code>allocate</code> invokes <code>framedAllocate</code>.</p>
<p><a class="anchor" id="send"></a> </p>
<h4><a class="anchor" id="autotoc_md483"></a>
4.8.2. send</h4>
<p>The implementation of <code>send</code> takes a reference to an <code><a class="el" href="class_fw_1_1_buffer.html">Fw::Buffer</a></code> <em>B</em> representing framed data and does the following:</p>
<ol type="1">
<li>Invoke <code>framedOut</code>, passing in <em>B</em> as the argument.</li>
</ol>
<ol type="1">
<li>Check the return status of the invocation. If the return status is not <code>Drv::SendStatus::SEND_OK</code>, then use <code><a class="el" href="class_fw_1_1_logger.html#a0a68fd1aef48f608252dd3e84013035a">Fw::Logger::logMsg</a></code> to log an error message. Don't send an event report in this case, because downlink is apparently not working.</li>
</ol>
<h2><a class="anchor" id="autotoc_md484"></a>
5. Ground Interface</h2>
<p>None.</p>
<p>If an error occurs, <code>Framer</code> writes to the system log. The rationale is that if something is wrong with the framing, then downlink of events is unlikely to work.</p>
<h2><a class="anchor" id="autotoc_md485"></a>
6. Example Uses</h2>
<p><a class="anchor" id="top-diagrams"></a> </p>
<h3><a class="anchor" id="autotoc_md486"></a>
6.1. Topology Diagrams</h3>
<p>The following topology diagrams show how to connect <code><a class="el" href="class_svc_1_1_framer.html" title="Generic framing component using FramingProtocol implementation for actual framing.">Svc::Framer</a></code> to a telemetry database, an event collector, a file downlink component, and a byte stream driver. The diagrams use the following instances:</p>
<ul>
<li><code>comm</code>: An instance of <a class="el" href="drv_2_byte_stream_driver_model_2docs_2sdd_8md.html">`Drv::ByteStreamDriverModel`</a>, for example <a class="el" href="drv_2_tcp_client_2docs_2sdd_8md.html">`Drv::TcpClient`</a>.</li>
<li><code>buffMgr</code>: An instance of <a class="el" href="svc_2_buffer_manager_2docs_2sdd_8md.html">`Svc::BufferManager`</a></li>
<li><code>fileDownlink</code>: An instance of <a class="el" href="svc_2_file_downlink_2docs_2sdd_8md.html">`Svc::FileDownlink`</a>.</li>
<li><code>framer</code>: An instance of <code><a class="el" href="class_svc_1_1_framer.html" title="Generic framing component using FramingProtocol implementation for actual framing.">Svc::Framer</a></code>.</li>
<li><code>chanTlm</code>: An instance of <a class="el" href="svc_2_tlm_chan_2docs_2sdd_8md.html">`Svc::TlmChan`</a>.</li>
<li><code>eventLogger</code>: An instance of <a class="el" href="svc_2_active_logger_2docs_2sdd_8md.html">`Svc::ActiveLogger`</a>.</li>
</ul>
<p><b>Topology 1: Telemetry packets:</b></p>
<div> <img src="img/top/tlm.png" alt="" width="1000/" class="inline"/> </div><p>The <code>chanTlm</code> instance sends telemetry packets to the <code>framer</code> instance.</p>
<p><b>Topology 2: Event packets:</b></p>
<div> <img src="img/top/event.png" alt="" width="1000/" class="inline"/> </div><p>The <code>eventLogger</code> instance sends event packets to the <code>framer</code> instance.</p>
<p><b>Topology 3: File packets:</b></p>
<div> <img src="img/top/framer-file.png" alt="" width="1000/" class="inline"/> </div><p>The <code>fileDownlink</code> instance sends a sequence of file packets, representing a complete file, to the <code>framer</code> instance. The sending happens in the following sequence:</p>
<ol type="1">
<li><code>fileDownlink</code> sends a buffer <em>PB</em> containing a file packet.</li>
</ol>
<ol type="1">
<li><code>framer</code> receives and processes <em>PB</em>. When it is done, it returns <em>PB</em> to <code>fileDownlink</code>.</li>
</ol>
<ol type="1">
<li>Upon receipt of <em>PB</em>, if another file packet is available, <code>fileDownlink</code> sends it.</li>
</ol>
<p>Exchanging the buffer controls the rate at which <code>fileDownlink</code> sends file packets. It ensures that the rate does not exceed the rate at which <code>framer</code> can handle the packets.</p>
<p><b>Topology 4: Framed data:</b></p>
<div> <img src="img/top/framed.png" alt="" width="1000/" class="inline"/> </div><p><code>framer</code> allocates frame buffers from <code>buffMgr</code>. It sends buffers containing frames to <code>comm</code>. <code>comm</code> processes the buffers and sends them to <code>buffMgr</code> for deallocation.</p>
<h3><a class="anchor" id="autotoc_md487"></a>
6.2. Sequence Diagrams</h3>
<p>In the following diagrams, open vertical rectangles represent threads. Vertical dashed lines represent component code. Solid horizontal arrows represent synchronous port invocations, and open horizontal arrows represent asynchronous port invocations.</p>
<p>These diagrams assume that, in the <a href="#runtime-setup">implementation of <code>Svc::FramingProtocol</code> passed in at initialization</a>, each downlink frame contains a single packet. This is a common use case; for example, the F Prime standard downlink protocol is implemented this way.</p>
<h4><a class="anchor" id="autotoc_md488"></a>
6.2.1. Sending a Telemetry Packet</h4>
<p>The following diagram shows what happens when <code>chanTlm</code> sends a telemetry packet to <code>framer</code>.</p>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    activate chanTlm</div>
<div class="line">    chanTlm-&gt;&gt;framer: Send telemetry packet P [comIn]</div>
<div class="line">    framer-&gt;&gt;buffMgr: Allocate frame buffer B [framedAllocate]</div>
<div class="line">    buffMgr--&gt;&gt;framer: Return B</div>
<div class="line">    framer-&gt;&gt;framer: Frame P into B</div>
<div class="line">    framer-)comm: Send B [framedOut]</div>
<div class="line">    comm-&gt;&gt;comm: Downlink frame</div>
<div class="line">    comm-&gt;&gt;buffMgr: Deallocate B</div>
<div class="line">    buffMgr--&gt;&gt;comm: </div>
<div class="line">    comm--&gt;&gt;framer: </div>
<div class="line">    framer--&gt;&gt;chanTlm: </div>
<div class="line">    deactivate chanTlm</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md489"></a>
6.2.2. Sending an Event Packet</h4>
<p>The following diagram shows what happens when <code>eventLogger</code> sends an event packet to <code>framer</code>.</p>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    activate eventLogger</div>
<div class="line">    eventLogger-&gt;&gt;framer: Send event packet P [comIn]</div>
<div class="line">    framer-&gt;&gt;buffMgr: Allocate frame buffer B [framedAllocate]</div>
<div class="line">    buffMgr--&gt;&gt;framer: Return B</div>
<div class="line">    framer-&gt;&gt;framer: Frame P into B</div>
<div class="line">    framer-)comm: Send B [framedOut]</div>
<div class="line">    comm-&gt;&gt;comm: Downlink frame</div>
<div class="line">    comm-&gt;&gt;buffMgr: Deallocate B</div>
<div class="line">    buffMgr--&gt;&gt;comm: </div>
<div class="line">    comm--&gt;&gt;framer: </div>
<div class="line">    framer--&gt;&gt;eventLogger: </div>
<div class="line">    deactivate eventLogger</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md490"></a>
6.2.3. Sending a File Packet</h4>
<p>The following diagram shows what happens when <code>fileDownlink</code> sends a file packet to <code>framer</code>.</p>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    activate fileDownlink</div>
<div class="line">    fileDownlink-&gt;&gt;framer: Send file packet buffer PB [bufferIn]</div>
<div class="line">    framer-&gt;&gt;buffMgr: Allocate frame buffer B [framedAllocate]</div>
<div class="line">    buffMgr--&gt;&gt;framer: Return B</div>
<div class="line">    framer-&gt;&gt;framer: Frame P into B</div>
<div class="line">    framer-)comm: Send B [framedOut]</div>
<div class="line">    comm-&gt;&gt;comm: Downlink frame</div>
<div class="line">    comm-&gt;&gt;buffMgr: Deallocate B</div>
<div class="line">    buffMgr--&gt;&gt;comm: </div>
<div class="line">    comm--&gt;&gt;framer: </div>
<div class="line">    framer-&gt;&gt;fileDownlink: Return PB [bufferDeallocate]</div>
<div class="line">    fileDownlink--&gt;&gt;framer: </div>
<div class="line">    framer--&gt;&gt;fileDownlink: </div>
<div class="line">    deactivate fileDownlink</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="svc.html">Svc Components, Ports, and Classes</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
